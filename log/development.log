  [1m[36m (1.9ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (1.2ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to DeviseTokenAuthCreateUsers (20160906190409)
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to DeviseTokenAuthCreateUsers (20160906190409)
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to DeviseTokenAuthCreateUsers (20160906190409)
  [1m[35m (0.1ms)[0m  begin transaction
DEPRECATION WARNING: `#timestamps` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in change at /Users/yali/My_apps/TBB/db/migrate/20160906190409_devise_token_auth_create_users.rb:45)
  [1m[36m (0.4ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar DEFAULT 'email' NOT NULL, "uid" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime, "remember_created_at" datetime, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" datetime, "last_sign_in_at" datetime, "current_sign_in_ip" varchar, "last_sign_in_ip" varchar, "confirmation_token" varchar, "confirmed_at" datetime, "confirmation_sent_at" datetime, "unconfirmed_email" varchar, "name" varchar, "nickname" varchar, "image" varchar, "email" varchar, "tokens" text, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.3ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_uid_and_provider" ON "users" ("uid", "provider")[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'

  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20160906190409"]]
  [1m[35m (1.9ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'



Started POST "/" for ::1 at 2016-09-06 21:16:31 +0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActionController::RoutingError (No route matches [POST] "/"):
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_route.html.erb (1.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_table.html.erb (31.0ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (12.0ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (129.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (92.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (142.2ms)


Started POST "/auth" for ::1 at 2016-09-06 21:17:58 +0200
Processing by DeviseTokenAuth::RegistrationsController#create as JSON
  Parameters: {"email"=>"yamen@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "registration"=>{"email"=>"yamen@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
Can't verify CSRF token authenticity
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms)

ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  actionpack (4.2.6) lib/action_controller/metal/request_forgery_protection.rb:181:in `handle_unverified_request'
  actionpack (4.2.6) lib/action_controller/metal/request_forgery_protection.rb:209:in `handle_unverified_request'
  devise (4.2.0) lib/devise/controllers/helpers.rb:253:in `handle_unverified_request'
  actionpack (4.2.6) lib/action_controller/metal/request_forgery_protection.rb:204:in `verify_authenticity_token'
  activesupport (4.2.6) lib/active_support/callbacks.rb:432:in `block in make_lambda'
  activesupport (4.2.6) lib/active_support/callbacks.rb:164:in `call'
  activesupport (4.2.6) lib/active_support/callbacks.rb:164:in `block in halting'
  activesupport (4.2.6) lib/active_support/callbacks.rb:504:in `call'
  activesupport (4.2.6) lib/active_support/callbacks.rb:504:in `block in call'
  activesupport (4.2.6) lib/active_support/callbacks.rb:504:in `each'
  activesupport (4.2.6) lib/active_support/callbacks.rb:504:in `call'
  activesupport (4.2.6) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.6) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.6) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.6) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.6) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.6) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.6) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.6) lib/action_dispatch/routing/mapper.rb:49:in `serve'
  actionpack (4.2.6) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.6) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.6) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:817:in `call'
  warden (1.2.6) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.6) lib/warden/manager.rb:34:in `catch'
  warden (1.2.6) lib/warden/manager.rb:34:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.6) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.6) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.6) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (44.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (32.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (71.9ms)


Started POST "/auth" for ::1 at 2016-09-06 21:19:04 +0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by DeviseTokenAuth::RegistrationsController#create as JSON
  Parameters: {"email"=>"yamen@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "registration"=>{"email"=>"yamen@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
Can't verify CSRF token authenticity
Unpermitted parameter: registration
Unpermitted parameter: registration
Unpermitted parameter: registration
Completed 422 Unprocessable Entity in 97ms (Views: 0.3ms | ActiveRecord: 0.3ms)


Started POST "/auth" for ::1 at 2016-09-06 21:25:26 +0200
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by DeviseTokenAuth::RegistrationsController#create as JSON
  Parameters: {"email"=>"yamen@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "registration"=>{"email"=>"yamen@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
Can't verify CSRF token authenticity
Unpermitted parameter: registration
Unpermitted parameter: registration
Unpermitted parameter: registration
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."provider" = ? AND "users"."email" = ?[0m  [["provider", "email"], ["email", "yamen@gmail.com"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("email", "encrypted_password", "tokens", "uid", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "yamen@gmail.com"], ["encrypted_password", "$2a$10$skgS71TDeU/Ca.MOc2PV/evVRHlle.t/BiI.SINFIdxlBr5AlYW0a"], ["tokens", "{}"], ["uid", "yamen@gmail.com"], ["created_at", "2016-09-06 19:25:26.543732"], ["updated_at", "2016-09-06 19:25:26.543732"]]
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "tokens" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["tokens", "{\"0dcKvBE8RcWTrfDFbes_cg\":{\"token\":\"$2a$10$mWFDbASTs0uaBmPQBOEGxOjHEXBUUhHDMLuSBtIEk50TOkcMPfuMG\",\"expiry\":1474399526}}"], ["updated_at", "2016-09-06 19:25:26.616393"], ["id", 1]]
  [1m[35m (1.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1   [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "tokens" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["tokens", "{\"0dcKvBE8RcWTrfDFbes_cg\":{\"token\":\"$2a$10$8pnowDi3WdIL1Lbi3.IQguQ3nd0oyr1SBR7J12JmN64qHJPtA97j.\",\"expiry\":1474399526,\"last_token\":\"$2a$10$mWFDbASTs0uaBmPQBOEGxOjHEXBUUhHDMLuSBtIEk50TOkcMPfuMG\",\"updated_at\":\"2016-09-06T21:25:26.686+02:00\"}}"], ["updated_at", "2016-09-06 19:25:26.687244"], ["id", 1]]
  [1m[35m (1.6ms)[0m  commit transaction
Completed 200 OK in 293ms (Views: 0.3ms | ActiveRecord: 7.1ms)


Started POST "/auth/sign_in" for ::1 at 2016-09-06 21:28:35 +0200
Processing by DeviseTokenAuth::SessionsController#create as JSON
  Parameters: {"email"=>"yamen@gmail.com", "password"=>"[FILTERED]", "session"=>{"email"=>"yamen@gmail.com", "password"=>"[FILTERED]"}}
Can't verify CSRF token authenticity
Unpermitted parameter: session
Unpermitted parameter: session
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE (email = 'yamen@gmail.com' AND provider='email')  ORDER BY "users"."id" ASC LIMIT 1[0m
Unpermitted parameter: session
Unpermitted parameter: session
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "tokens" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["tokens", "{\"0dcKvBE8RcWTrfDFbes_cg\":{\"token\":\"$2a$10$8pnowDi3WdIL1Lbi3.IQguQ3nd0oyr1SBR7J12JmN64qHJPtA97j.\",\"expiry\":1474399526,\"last_token\":\"$2a$10$mWFDbASTs0uaBmPQBOEGxOjHEXBUUhHDMLuSBtIEk50TOkcMPfuMG\",\"updated_at\":\"2016-09-06T21:25:26.686+02:00\"},\"JsBoMlg1NcTy4gO4pQY1gA\":{\"token\":\"$2a$10$stLlW7K8vAwQkHC1W8BCCeKpZbLwP0tzQFLvmEOzaZV.hQjqO4KBW\",\"expiry\":1474399715}}"], ["updated_at", "2016-09-06 19:28:35.549382"], ["id", 1]]
  [1m[35m (1.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = ?, "current_sign_in_at" = ?, "last_sign_in_ip" = ?, "current_sign_in_ip" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["last_sign_in_at", "2016-09-06 19:28:35.553605"], ["current_sign_in_at", "2016-09-06 19:28:35.553605"], ["last_sign_in_ip", "::1"], ["current_sign_in_ip", "::1"], ["sign_in_count", 1], ["updated_at", "2016-09-06 19:28:35.554504"], ["id", 1]]
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1 [0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "users" SET "tokens" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["tokens", "{\"0dcKvBE8RcWTrfDFbes_cg\":{\"token\":\"$2a$10$8pnowDi3WdIL1Lbi3.IQguQ3nd0oyr1SBR7J12JmN64qHJPtA97j.\",\"expiry\":1474399526,\"last_token\":\"$2a$10$mWFDbASTs0uaBmPQBOEGxOjHEXBUUhHDMLuSBtIEk50TOkcMPfuMG\",\"updated_at\":\"2016-09-06T21:25:26.686+02:00\"},\"JsBoMlg1NcTy4gO4pQY1gA\":{\"token\":\"$2a$10$Jy6wacpFyyUmaRNhd1tqwObonnRsoP4.blvH4fl.N7ggrCSjPHHF.\",\"expiry\":1474399715,\"last_token\":\"$2a$10$stLlW7K8vAwQkHC1W8BCCeKpZbLwP0tzQFLvmEOzaZV.hQjqO4KBW\",\"updated_at\":\"2016-09-06T21:28:35.624+02:00\"}}"], ["updated_at", "2016-09-06 19:28:35.625210"], ["id", 1]]
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
Completed 200 OK in 215ms (Views: 0.2ms | ActiveRecord: 6.4ms)


Started POST "/auth/sign_in" for ::1 at 2016-09-06 21:31:14 +0200
Processing by DeviseTokenAuth::SessionsController#create as JSON
  Parameters: {"email"=>"yamen@gmail.com", "password"=>"[FILTERED]", "session"=>{"email"=>"yamen@gmail.com", "password"=>"[FILTERED]"}}
Can't verify CSRF token authenticity
Unpermitted parameter: session
Unpermitted parameter: session
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE (email = 'yamen@gmail.com' AND provider='email')  ORDER BY "users"."id" ASC LIMIT 1
Unpermitted parameter: session
Unpermitted parameter: session
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "users" SET "tokens" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["tokens", "{\"0dcKvBE8RcWTrfDFbes_cg\":{\"token\":\"$2a$10$8pnowDi3WdIL1Lbi3.IQguQ3nd0oyr1SBR7J12JmN64qHJPtA97j.\",\"expiry\":1474399526,\"last_token\":\"$2a$10$mWFDbASTs0uaBmPQBOEGxOjHEXBUUhHDMLuSBtIEk50TOkcMPfuMG\",\"updated_at\":\"2016-09-06T21:25:26.686+02:00\"},\"JsBoMlg1NcTy4gO4pQY1gA\":{\"token\":\"$2a$10$Jy6wacpFyyUmaRNhd1tqwObonnRsoP4.blvH4fl.N7ggrCSjPHHF.\",\"expiry\":1474399715,\"last_token\":\"$2a$10$stLlW7K8vAwQkHC1W8BCCeKpZbLwP0tzQFLvmEOzaZV.hQjqO4KBW\",\"updated_at\":\"2016-09-06T21:28:35.624+02:00\"},\"7rhH8nAkiLluXMFdDJ7uPQ\":{\"token\":\"$2a$10$Haes865mMv6FSBV4zuBReu/6kcjE70HDYiBGN27Z/QG71KBvQGx2i\",\"expiry\":1474399874}}"], ["updated_at", "2016-09-06 19:31:14.339756"], ["id", 1]]
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", "2016-09-06 19:31:14.343576"], ["sign_in_count", 2], ["updated_at", "2016-09-06 19:31:14.344496"], ["id", 1]]
  [1m[35m (1.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1   [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "tokens" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["tokens", "{\"0dcKvBE8RcWTrfDFbes_cg\":{\"token\":\"$2a$10$8pnowDi3WdIL1Lbi3.IQguQ3nd0oyr1SBR7J12JmN64qHJPtA97j.\",\"expiry\":1474399526,\"last_token\":\"$2a$10$mWFDbASTs0uaBmPQBOEGxOjHEXBUUhHDMLuSBtIEk50TOkcMPfuMG\",\"updated_at\":\"2016-09-06T21:25:26.686+02:00\"},\"JsBoMlg1NcTy4gO4pQY1gA\":{\"token\":\"$2a$10$Jy6wacpFyyUmaRNhd1tqwObonnRsoP4.blvH4fl.N7ggrCSjPHHF.\",\"expiry\":1474399715,\"last_token\":\"$2a$10$stLlW7K8vAwQkHC1W8BCCeKpZbLwP0tzQFLvmEOzaZV.hQjqO4KBW\",\"updated_at\":\"2016-09-06T21:28:35.624+02:00\"},\"7rhH8nAkiLluXMFdDJ7uPQ\":{\"token\":\"$2a$10$Sj2gVQeBYi4OSsj1mbSPEu09iqGLyrAhv2m0iIOSCG43ws3n08ixW\",\"expiry\":1474399874,\"last_token\":\"$2a$10$Haes865mMv6FSBV4zuBReu/6kcjE70HDYiBGN27Z/QG71KBvQGx2i\",\"updated_at\":\"2016-09-06T21:31:14.413+02:00\"}}"], ["updated_at", "2016-09-06 19:31:14.414483"], ["id", 1]]
  [1m[35m (1.8ms)[0m  commit transaction
Completed 200 OK in 210ms (Views: 0.2ms | ActiveRecord: 6.4ms)


Started POST "/auth/sign_in" for ::1 at 2016-09-06 21:31:18 +0200
Processing by DeviseTokenAuth::SessionsController#create as JSON
  Parameters: {"email"=>"yamen@gmail.com", "password"=>"[FILTERED]", "session"=>{"email"=>"yamen@gmail.com", "password"=>"[FILTERED]"}}
Can't verify CSRF token authenticity
Unpermitted parameter: session
Unpermitted parameter: session
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE (email = 'yamen@gmail.com' AND provider='email')  ORDER BY "users"."id" ASC LIMIT 1[0m
Unpermitted parameter: session
Unpermitted parameter: session
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "tokens" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["tokens", "{\"0dcKvBE8RcWTrfDFbes_cg\":{\"token\":\"$2a$10$8pnowDi3WdIL1Lbi3.IQguQ3nd0oyr1SBR7J12JmN64qHJPtA97j.\",\"expiry\":1474399526,\"last_token\":\"$2a$10$mWFDbASTs0uaBmPQBOEGxOjHEXBUUhHDMLuSBtIEk50TOkcMPfuMG\",\"updated_at\":\"2016-09-06T21:25:26.686+02:00\"},\"JsBoMlg1NcTy4gO4pQY1gA\":{\"token\":\"$2a$10$Jy6wacpFyyUmaRNhd1tqwObonnRsoP4.blvH4fl.N7ggrCSjPHHF.\",\"expiry\":1474399715,\"last_token\":\"$2a$10$stLlW7K8vAwQkHC1W8BCCeKpZbLwP0tzQFLvmEOzaZV.hQjqO4KBW\",\"updated_at\":\"2016-09-06T21:28:35.624+02:00\"},\"7rhH8nAkiLluXMFdDJ7uPQ\":{\"token\":\"$2a$10$Sj2gVQeBYi4OSsj1mbSPEu09iqGLyrAhv2m0iIOSCG43ws3n08ixW\",\"expiry\":1474399874,\"last_token\":\"$2a$10$Haes865mMv6FSBV4zuBReu/6kcjE70HDYiBGN27Z/QG71KBvQGx2i\",\"updated_at\":\"2016-09-06T21:31:14.413+02:00\"},\"QH-RdiY80l7zRNf3y4bdcw\":{\"token\":\"$2a$10$uPEcLMT9ORR0grp6RgON6.9aWZE.qkVcU9TvLG1/fgxQTjFBC4HSi\",\"expiry\":1474399878}}"], ["updated_at", "2016-09-06 19:31:18.799862"], ["id", 1]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = ?, "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["last_sign_in_at", "2016-09-06 19:31:14.343576"], ["current_sign_in_at", "2016-09-06 19:31:18.803996"], ["sign_in_count", 3], ["updated_at", "2016-09-06 19:31:18.805051"], ["id", 1]]
  [1m[36m (1.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1 [0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "users" SET "tokens" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["tokens", "{\"0dcKvBE8RcWTrfDFbes_cg\":{\"token\":\"$2a$10$8pnowDi3WdIL1Lbi3.IQguQ3nd0oyr1SBR7J12JmN64qHJPtA97j.\",\"expiry\":1474399526,\"last_token\":\"$2a$10$mWFDbASTs0uaBmPQBOEGxOjHEXBUUhHDMLuSBtIEk50TOkcMPfuMG\",\"updated_at\":\"2016-09-06T21:25:26.686+02:00\"},\"JsBoMlg1NcTy4gO4pQY1gA\":{\"token\":\"$2a$10$Jy6wacpFyyUmaRNhd1tqwObonnRsoP4.blvH4fl.N7ggrCSjPHHF.\",\"expiry\":1474399715,\"last_token\":\"$2a$10$stLlW7K8vAwQkHC1W8BCCeKpZbLwP0tzQFLvmEOzaZV.hQjqO4KBW\",\"updated_at\":\"2016-09-06T21:28:35.624+02:00\"},\"7rhH8nAkiLluXMFdDJ7uPQ\":{\"token\":\"$2a$10$Sj2gVQeBYi4OSsj1mbSPEu09iqGLyrAhv2m0iIOSCG43ws3n08ixW\",\"expiry\":1474399874,\"last_token\":\"$2a$10$Haes865mMv6FSBV4zuBReu/6kcjE70HDYiBGN27Z/QG71KBvQGx2i\",\"updated_at\":\"2016-09-06T21:31:14.413+02:00\"},\"QH-RdiY80l7zRNf3y4bdcw\":{\"token\":\"$2a$10$cYiaoO3kY1Cp7yphF7cN6e4ml8kxttnC7AUh3cpYUyiLxhz4l4mkK\",\"expiry\":1474399878,\"last_token\":\"$2a$10$uPEcLMT9ORR0grp6RgON6.9aWZE.qkVcU9TvLG1/fgxQTjFBC4HSi\",\"updated_at\":\"2016-09-06T21:31:18.874+02:00\"}}"], ["updated_at", "2016-09-06 19:31:18.875238"], ["id", 1]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
Completed 200 OK in 214ms (Views: 0.2ms | ActiveRecord: 6.7ms)


Started GET "/auth/validate_token?uid=yamen@gmail.com&access-token&IpN8oH_dlPBl3nD7qCnAog&client=QH-RdiY80l7zRNf3y4bdcw" for ::1 at 2016-09-06 21:33:00 +0200
Processing by DeviseTokenAuth::TokenValidationsController#validate_token as JSON
  Parameters: {"uid"=>"yamen@gmail.com", "access-token"=>nil, "IpN8oH_dlPBl3nD7qCnAog"=>nil, "client"=>"QH-RdiY80l7zRNf3y4bdcw", "token_validation"=>{}}
Completed 401 Unauthorized in 15ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  ORDER BY "users"."id" ASC LIMIT 1


Started GET "/auth/validate_token?uid=yamen@gmail.com&access-token=IpN8oH_dlPBl3nD7qCnAog&client=QH-RdiY80l7zRNf3y4bdcw" for ::1 at 2016-09-06 21:36:34 +0200
Processing by DeviseTokenAuth::TokenValidationsController#validate_token as JSON
  Parameters: {"uid"=>"yamen@gmail.com", "access-token"=>"IpN8oH_dlPBl3nD7qCnAog", "client"=>"QH-RdiY80l7zRNf3y4bdcw", "token_validation"=>{}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."uid" = ? LIMIT 1  [["uid", "yamen@gmail.com"]]
Completed 401 Unauthorized in 74ms (Views: 0.2ms | ActiveRecord: 0.5ms)


Started POST "/auth/sign_in" for ::1 at 2016-09-06 21:37:39 +0200
Processing by DeviseTokenAuth::SessionsController#create as JSON
  Parameters: {"email"=>"yamen@gmail.com", "password"=>"[FILTERED]", "session"=>{"email"=>"yamen@gmail.com", "password"=>"[FILTERED]"}}
Can't verify CSRF token authenticity
Unpermitted parameter: session
Unpermitted parameter: session
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE (email = 'yamen@gmail.com' AND provider='email')  ORDER BY "users"."id" ASC LIMIT 1[0m
Unpermitted parameter: session
Unpermitted parameter: session
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "tokens" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["tokens", "{\"0dcKvBE8RcWTrfDFbes_cg\":{\"token\":\"$2a$10$8pnowDi3WdIL1Lbi3.IQguQ3nd0oyr1SBR7J12JmN64qHJPtA97j.\",\"expiry\":1474399526,\"last_token\":\"$2a$10$mWFDbASTs0uaBmPQBOEGxOjHEXBUUhHDMLuSBtIEk50TOkcMPfuMG\",\"updated_at\":\"2016-09-06T21:25:26.686+02:00\"},\"JsBoMlg1NcTy4gO4pQY1gA\":{\"token\":\"$2a$10$Jy6wacpFyyUmaRNhd1tqwObonnRsoP4.blvH4fl.N7ggrCSjPHHF.\",\"expiry\":1474399715,\"last_token\":\"$2a$10$stLlW7K8vAwQkHC1W8BCCeKpZbLwP0tzQFLvmEOzaZV.hQjqO4KBW\",\"updated_at\":\"2016-09-06T21:28:35.624+02:00\"},\"7rhH8nAkiLluXMFdDJ7uPQ\":{\"token\":\"$2a$10$Sj2gVQeBYi4OSsj1mbSPEu09iqGLyrAhv2m0iIOSCG43ws3n08ixW\",\"expiry\":1474399874,\"last_token\":\"$2a$10$Haes865mMv6FSBV4zuBReu/6kcjE70HDYiBGN27Z/QG71KBvQGx2i\",\"updated_at\":\"2016-09-06T21:31:14.413+02:00\"},\"QH-RdiY80l7zRNf3y4bdcw\":{\"token\":\"$2a$10$cYiaoO3kY1Cp7yphF7cN6e4ml8kxttnC7AUh3cpYUyiLxhz4l4mkK\",\"expiry\":1474399878,\"last_token\":\"$2a$10$uPEcLMT9ORR0grp6RgON6.9aWZE.qkVcU9TvLG1/fgxQTjFBC4HSi\",\"updated_at\":\"2016-09-06T21:31:18.874+02:00\"},\"K9gQTCrUcOVLOJPbp-4b1Q\":{\"token\":\"$2a$10$pi/20pkxMEw5cY8hRbBm2.yN58atGEYyYHlXqTl0n2ymFVl6esu8i\",\"expiry\":1474400259}}"], ["updated_at", "2016-09-06 19:37:39.806510"], ["id", 1]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "users" SET "last_sign_in_at" = ?, "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["last_sign_in_at", "2016-09-06 19:31:18.803996"], ["current_sign_in_at", "2016-09-06 19:37:39.810968"], ["sign_in_count", 4], ["updated_at", "2016-09-06 19:37:39.811945"], ["id", 1]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1 [0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "users" SET "tokens" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["tokens", "{\"0dcKvBE8RcWTrfDFbes_cg\":{\"token\":\"$2a$10$8pnowDi3WdIL1Lbi3.IQguQ3nd0oyr1SBR7J12JmN64qHJPtA97j.\",\"expiry\":1474399526,\"last_token\":\"$2a$10$mWFDbASTs0uaBmPQBOEGxOjHEXBUUhHDMLuSBtIEk50TOkcMPfuMG\",\"updated_at\":\"2016-09-06T21:25:26.686+02:00\"},\"JsBoMlg1NcTy4gO4pQY1gA\":{\"token\":\"$2a$10$Jy6wacpFyyUmaRNhd1tqwObonnRsoP4.blvH4fl.N7ggrCSjPHHF.\",\"expiry\":1474399715,\"last_token\":\"$2a$10$stLlW7K8vAwQkHC1W8BCCeKpZbLwP0tzQFLvmEOzaZV.hQjqO4KBW\",\"updated_at\":\"2016-09-06T21:28:35.624+02:00\"},\"7rhH8nAkiLluXMFdDJ7uPQ\":{\"token\":\"$2a$10$Sj2gVQeBYi4OSsj1mbSPEu09iqGLyrAhv2m0iIOSCG43ws3n08ixW\",\"expiry\":1474399874,\"last_token\":\"$2a$10$Haes865mMv6FSBV4zuBReu/6kcjE70HDYiBGN27Z/QG71KBvQGx2i\",\"updated_at\":\"2016-09-06T21:31:14.413+02:00\"},\"QH-RdiY80l7zRNf3y4bdcw\":{\"token\":\"$2a$10$cYiaoO3kY1Cp7yphF7cN6e4ml8kxttnC7AUh3cpYUyiLxhz4l4mkK\",\"expiry\":1474399878,\"last_token\":\"$2a$10$uPEcLMT9ORR0grp6RgON6.9aWZE.qkVcU9TvLG1/fgxQTjFBC4HSi\",\"updated_at\":\"2016-09-06T21:31:18.874+02:00\"},\"K9gQTCrUcOVLOJPbp-4b1Q\":{\"token\":\"$2a$10$b3gmXD9K8p7.mTtWrNWp0Ou50D.kjhU7nII4U8/EtFU7MNiMiIOoW\",\"expiry\":1474400259,\"last_token\":\"$2a$10$pi/20pkxMEw5cY8hRbBm2.yN58atGEYyYHlXqTl0n2ymFVl6esu8i\",\"updated_at\":\"2016-09-06T21:37:39.879+02:00\"}}"], ["updated_at", "2016-09-06 19:37:39.880179"], ["id", 1]]
  [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
Completed 200 OK in 212ms (Views: 0.2ms | ActiveRecord: 6.4ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  ORDER BY "users"."id" ASC LIMIT 1[0m


Started GET "/auth/validate_token?uid=yamen@gmail.com&access-token=keiKWhwcXt81F4GDqe5fNQ&client=K9gQTCrUcOVLOJPbp-4b1Q" for ::1 at 2016-09-06 21:39:14 +0200
Processing by DeviseTokenAuth::TokenValidationsController#validate_token as JSON
  Parameters: {"uid"=>"yamen@gmail.com", "access-token"=>"keiKWhwcXt81F4GDqe5fNQ", "client"=>"K9gQTCrUcOVLOJPbp-4b1Q", "token_validation"=>{}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."uid" = ? LIMIT 1  [["uid", "yamen@gmail.com"]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1   [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "tokens" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["tokens", "{\"0dcKvBE8RcWTrfDFbes_cg\":{\"token\":\"$2a$10$8pnowDi3WdIL1Lbi3.IQguQ3nd0oyr1SBR7J12JmN64qHJPtA97j.\",\"expiry\":1474399526,\"last_token\":\"$2a$10$mWFDbASTs0uaBmPQBOEGxOjHEXBUUhHDMLuSBtIEk50TOkcMPfuMG\",\"updated_at\":\"2016-09-06T21:25:26.686+02:00\"},\"JsBoMlg1NcTy4gO4pQY1gA\":{\"token\":\"$2a$10$Jy6wacpFyyUmaRNhd1tqwObonnRsoP4.blvH4fl.N7ggrCSjPHHF.\",\"expiry\":1474399715,\"last_token\":\"$2a$10$stLlW7K8vAwQkHC1W8BCCeKpZbLwP0tzQFLvmEOzaZV.hQjqO4KBW\",\"updated_at\":\"2016-09-06T21:28:35.624+02:00\"},\"7rhH8nAkiLluXMFdDJ7uPQ\":{\"token\":\"$2a$10$Sj2gVQeBYi4OSsj1mbSPEu09iqGLyrAhv2m0iIOSCG43ws3n08ixW\",\"expiry\":1474399874,\"last_token\":\"$2a$10$Haes865mMv6FSBV4zuBReu/6kcjE70HDYiBGN27Z/QG71KBvQGx2i\",\"updated_at\":\"2016-09-06T21:31:14.413+02:00\"},\"QH-RdiY80l7zRNf3y4bdcw\":{\"token\":\"$2a$10$cYiaoO3kY1Cp7yphF7cN6e4ml8kxttnC7AUh3cpYUyiLxhz4l4mkK\",\"expiry\":1474399878,\"last_token\":\"$2a$10$uPEcLMT9ORR0grp6RgON6.9aWZE.qkVcU9TvLG1/fgxQTjFBC4HSi\",\"updated_at\":\"2016-09-06T21:31:18.874+02:00\"},\"K9gQTCrUcOVLOJPbp-4b1Q\":{\"token\":\"$2a$10$OmMzrPcOH352.VHgm1CTG.mgQGsxHIH1.FPfOWKdiEJ97rEzQofe.\",\"expiry\":1474400354,\"last_token\":\"$2a$10$b3gmXD9K8p7.mTtWrNWp0Ou50D.kjhU7nII4U8/EtFU7MNiMiIOoW\",\"updated_at\":\"2016-09-06T21:39:14.235+02:00\"}}"], ["updated_at", "2016-09-06 19:39:14.237001"], ["id", 1]]
  [1m[35m (1.7ms)[0m  commit transaction
Completed 200 OK in 145ms (Views: 0.3ms | ActiveRecord: 2.3ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateCountries (20160908183624)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mCREATE TABLE "countries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "code" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20160908183624"]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[36m (36.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (2.5ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to DeviseTokenAuthCreateUsers (20160906190409)
  [1m[35m (0.1ms)[0m  BEGIN
DEPRECATION WARNING: `#timestamps` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in change at /Users/yali/My_apps/TBB/db/migrate/20160906190409_devise_token_auth_create_users.rb:45)
  [1m[36m (23.0ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "provider" character varying DEFAULT 'email' NOT NULL, "uid" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying, "last_sign_in_ip" character varying, "confirmation_token" character varying, "confirmed_at" timestamp, "confirmation_sent_at" timestamp, "unconfirmed_email" character varying, "name" character varying, "nickname" character varying, "image" character varying, "email" character varying, "tokens" text, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (1.9ms)[0m  CREATE  INDEX  "index_users_on_email" ON "users"  ("email")
  [1m[36m (1.9ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_uid_and_provider" ON "users"  ("uid", "provider")[0m
  [1m[35m (2.2ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160906190409"]]
  [1m[35m (1.4ms)[0m  COMMIT
Migrating to CreateCountries (20160908183624)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateCountries (20160908183624)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (3.0ms)[0m  [1mCREATE TABLE "countries" ("name" character varying, "code" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20160908183624"]]
  [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (1.9ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'countries'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "countries" ("code", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4)  [["code", "1"], ["name", "jfddfj"], ["created_at", "2016-09-08 18:54:39.613629"], ["updated_at", "2016-09-08 18:54:39.613629"]]
  [1m[36m (2.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "countries" ("code", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4)[0m  [["code", "1"], ["name", "fd"], ["created_at", "2016-09-08 18:55:14.526550"], ["updated_at", "2016-09-08 18:55:14.526550"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (1.9ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'countries'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateCountries (20160908183624)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (3.3ms)[0m  DROP TABLE "countries"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20160908183624"]]
  [1m[35m (4.0ms)[0m  COMMIT
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.1ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateCountries (20160908183624)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (16.6ms)[0m  [1mCREATE TABLE "countries" ("name" character varying, "code" serial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20160908183624"]]
  [1m[36m (1.4ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'countries'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateCountries (20160908183624)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.0ms)[0m  DROP TABLE "countries"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20160908183624"]]
  [1m[35m (4.7ms)[0m  COMMIT
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.9ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateCountries (20160908183624)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (15.6ms)[0m  [1mCREATE TABLE "countries" ("id" serial primary key, "name" character varying, "code" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20160908183624"]]
  [1m[36m (5.9ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'countries'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.8ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateCities (20160908190340)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateCities (20160908190539)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (7.5ms)[0m  [1mCREATE TABLE "cities" ("id" serial primary key, "name" character varying, "country_id_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (1.9ms)[0m  CREATE  INDEX  "index_cities_on_country_id_id" ON "cities"  ("country_id_id")
  [1m[36m (1.8ms)[0m  [1mALTER TABLE "cities" ADD CONSTRAINT "fk_rails_cc28dbe1af"
FOREIGN KEY ("country_id_id")
  REFERENCES "country_ids" ("id")
[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateCities (20160908190656)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (6.2ms)[0m  [1mCREATE TABLE "cities" ("id" serial primary key, "name" character varying, "country_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (1.8ms)[0m  CREATE  INDEX  "index_cities_on_country_id" ON "cities"  ("country_id")
  [1m[36m (9.4ms)[0m  [1mALTER TABLE "cities" ADD CONSTRAINT "fk_rails_996e05be41"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")
[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20160908190656"]]
  [1m[36m (1.8ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (2.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'cities'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'countries'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.4ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateTours (20160908191341)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateTours (20160908191604)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (7.8ms)[0m  [1mCREATE TABLE "tours" ("id" serial primary key, "title" character varying, "description" text, "city_id" integer, "price" float, "user_id" integer, "estimated_time" character varying, "is_trans_included" boolean, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (1.9ms)[0m  CREATE  INDEX  "index_tours_on_city_id" ON "tours"  ("city_id")
  [1m[36m (2.3ms)[0m  [1mCREATE  INDEX  "index_tours_on_user_id" ON "tours"  ("user_id")[0m
  [1m[35m (3.0ms)[0m  ALTER TABLE "tours" ADD CONSTRAINT "fk_rails_12295a7603"
FOREIGN KEY ("city_id")
  REFERENCES "cities" ("id")

  [1m[36m (3.2ms)[0m  [1mALTER TABLE "tours" ADD CONSTRAINT "fk_rails_644aa67ccf"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20160908191604"]]
  [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (2.7ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'cities'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'countries'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.4ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'tours'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateTouristAttractions (20160908192636)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (9.1ms)[0m  [1mCREATE TABLE "tourist_attractions" ("id" serial primary key, "title" character varying, "description" text, "trans_info" text, "address" text, "latitude" float, "longitude" float, "tour_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (2.1ms)[0m  CREATE  INDEX  "index_tourist_attractions_on_tour_id" ON "tourist_attractions"  ("tour_id")
  [1m[36m (3.6ms)[0m  [1mALTER TABLE "tourist_attractions" ADD CONSTRAINT "fk_rails_7aa3e4086a"
FOREIGN KEY ("tour_id")
  REFERENCES "tours" ("id")
[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20160908192636"]]
  [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (2.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'cities'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'countries'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.9ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'tourist_attractions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'tours'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.9ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateTouristAttractionDetails (20160908194945)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (7.2ms)[0m  [1mCREATE TABLE "tourist_attraction_details" ("id" serial primary key, "title" character varying, "description" text, "tourist_attraction_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (1.9ms)[0m  CREATE  INDEX  "index_tourist_attraction_details_on_tourist_attraction_id" ON "tourist_attraction_details"  ("tourist_attraction_id")
  [1m[36m (3.2ms)[0m  [1mALTER TABLE "tourist_attraction_details" ADD CONSTRAINT "fk_rails_c238443cc7"
FOREIGN KEY ("tourist_attraction_id")
  REFERENCES "tourist_attractions" ("id")
[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20160908194945"]]
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (2.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'cities'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'countries'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.4ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'tourist_attraction_details'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'tourist_attractions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.4ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'tours'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateAttachmentTypes (20160908195750)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (7.0ms)[0m  [1mCREATE TABLE "attachment_types" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20160908195750"]]
  [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
Migrating to CreateAttachments (20160908195840)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (4.8ms)[0m  [1mCREATE TABLE "attachments" ("id" serial primary key, "url" text, "tourist_attraction_id" integer, "tourist_attraction_detail_id" integer, "attachment_type_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (1.8ms)[0m  CREATE  INDEX  "index_attachments_on_tourist_attraction_id" ON "attachments"  ("tourist_attraction_id")
  [1m[36m (1.7ms)[0m  [1mCREATE  INDEX  "index_attachments_on_tourist_attraction_detail_id" ON "attachments"  ("tourist_attraction_detail_id")[0m
  [1m[35m (2.0ms)[0m  CREATE  INDEX  "index_attachments_on_attachment_type_id" ON "attachments"  ("attachment_type_id")
  [1m[36m (2.2ms)[0m  [1mALTER TABLE "attachments" ADD CONSTRAINT "fk_rails_a024ffae96"
FOREIGN KEY ("tourist_attraction_id")
  REFERENCES "tourist_attractions" ("id")
[0m
  [1m[35m (2.0ms)[0m  ALTER TABLE "attachments" ADD CONSTRAINT "fk_rails_357b348211"
FOREIGN KEY ("tourist_attraction_detail_id")
  REFERENCES "tourist_attraction_details" ("id")

  [1m[36m (0.9ms)[0m  [1mALTER TABLE "attachments" ADD CONSTRAINT "fk_rails_54afe13733"
FOREIGN KEY ("attachment_type_id")
  REFERENCES "attachment_types" ("id")
[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20160908195840"]]
  [1m[36m (1.3ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (1.8ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attachment_types'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (2.2ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attachments'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'cities'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'countries'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.4ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'tourist_attraction_details'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'tourist_attractions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.4ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'tours'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateReviews (20160908200044)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (7.8ms)[0m  [1mCREATE TABLE "reviews" ("id" serial primary key, "title" character varying, "content" text, "score" float, "tour_id" integer, "user_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (1.8ms)[0m  CREATE  INDEX  "index_reviews_on_tour_id" ON "reviews"  ("tour_id")
  [1m[36m (1.9ms)[0m  [1mCREATE  INDEX  "index_reviews_on_user_id" ON "reviews"  ("user_id")[0m
  [1m[35m (2.2ms)[0m  ALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_cbf2a12b63"
FOREIGN KEY ("tour_id")
  REFERENCES "tours" ("id")

  [1m[36m (0.9ms)[0m  [1mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_74a66bd6c5"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20160908200044"]]
  [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (1.9ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attachment_types'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (2.3ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attachments'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'cities'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.7ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'countries'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'reviews'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'tourist_attraction_details'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.4ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'tourist_attractions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'tours'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.4ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "attachment_types" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "image"], ["created_at", "2016-09-08 20:08:02.626680"], ["updated_at", "2016-09-08 20:08:02.626680"]]
  [1m[35m (1.9ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "attachment_types" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "audio"], ["created_at", "2016-09-08 20:08:02.633037"], ["updated_at", "2016-09-08 20:08:02.633037"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "tours" ("title", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["title", "test"], ["created_at", "2016-09-08 20:09:19.402228"], ["updated_at", "2016-09-08 20:09:19.402228"]]
  [1m[35m (2.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (4.4ms)[0m  INSERT INTO "attachments" ("url", "attachment_type_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["url", "image test1"], ["attachment_type_id", 1], ["created_at", "2016-09-08 20:14:35.467258"], ["updated_at", "2016-09-08 20:14:35.467258"]]
  [1m[36m (1.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "attachments" ("url", "attachment_type_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["url", "image test2"], ["attachment_type_id", 1], ["created_at", "2016-09-08 20:14:56.901673"], ["updated_at", "2016-09-08 20:14:56.901673"]]
  [1m[35m (1.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "attachments" ("url", "attachment_type_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["url", "audio test2"], ["attachment_type_id", 2], ["created_at", "2016-09-08 20:15:17.628817"], ["updated_at", "2016-09-08 20:15:17.628817"]]
  [1m[36m (1.3ms)[0m  [1mCOMMIT[0m
  [1m[35mTouristAttraction Load (0.4ms)[0m  SELECT  "tourist_attractions".* FROM "tourist_attractions"  ORDER BY "tourist_attractions"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "tourist_attractions" ("title", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["title", "test"], ["created_at", "2016-09-08 20:16:05.848384"], ["updated_at", "2016-09-08 20:16:05.848384"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT "attachments".* FROM "attachments"
  [1m[36mAttachment Load (0.2ms)[0m  [1mSELECT  "attachments".* FROM "attachments" WHERE "attachments"."id" = $1 LIMIT 1[0m  [["id", nil]]
  [1m[35mAttachment Load (0.4ms)[0m  SELECT  "attachments".* FROM "attachments" WHERE "attachments"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "attachments" SET "tourist_attraction_id" = $1, "updated_at" = $2 WHERE "attachments"."id" = $3  [["tourist_attraction_id", 1], ["updated_at", "2016-09-08 20:17:29.774615"], ["id", 1]]
  [1m[36m (1.3ms)[0m  [1mCOMMIT[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT  "attachments".* FROM "attachments" WHERE "attachments"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "attachments" SET "tourist_attraction_id" = $1, "updated_at" = $2 WHERE "attachments"."id" = $3  [["tourist_attraction_id", 1], ["updated_at", "2016-09-08 20:17:43.063442"], ["id", 2]]
  [1m[36m (1.5ms)[0m  [1mCOMMIT[0m
  [1m[35mAttachment Load (0.4ms)[0m  SELECT  "attachments".* FROM "attachments" WHERE "attachments"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "attachments" SET "tourist_attraction_id" = $1, "updated_at" = $2 WHERE "attachments"."id" = $3  [["tourist_attraction_id", 1], ["updated_at", "2016-09-08 20:17:51.851480"], ["id", 3]]
  [1m[36m (1.5ms)[0m  [1mCOMMIT[0m
  [1m[35mTouristAttraction Load (0.5ms)[0m  SELECT  "tourist_attractions".* FROM "tourist_attractions"  ORDER BY "tourist_attractions"."id" ASC LIMIT 1
  [1m[36mAttachment Load (0.2ms)[0m  [1mSELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_id" = $1 AND "attachments"."attachment_type_id" = 1[0m  [["tourist_attraction_id", 1]]
  [1m[35mAttachment Load (0.2ms)[0m  SELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_id" = $1 AND "attachments"."attachment_type_id" = 2  [["tourist_attraction_id", 1]]


Started GET "/attachment" for ::1 at 2016-09-10 13:29:51 +0200
  [1m[36mActiveRecord::SchemaMigration Load (7.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActionController::RoutingError (No route matches [GET] "/attachment"):
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_route.html.erb (1.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_table.html.erb (31.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (12.0ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (148.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (143.0ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (213.0ms)


Started GET "/attachments" for ::1 at 2016-09-10 13:30:03 +0200

ActionController::RoutingError (No route matches [GET] "/attachments"):
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_route.html.erb (1.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (58.0ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (32.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (72.4ms)


Started GET "/attachments" for ::1 at 2016-09-10 13:30:35 +0200

ActionController::RoutingError (No route matches [GET] "/attachments"):
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_route.html.erb (1.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.0ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (55.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (37.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (78.8ms)


Started GET "/attachments" for ::1 at 2016-09-10 13:31:53 +0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by AttachmentsController#index as JSON
  Parameters: {"attachment"=>{}}
  [1m[35mAttachment Load (22.2ms)[0m  SELECT "attachments".* FROM "attachments"
  Rendered attachments/_attachment.json.jbuilder (1.3ms)
  Rendered attachments/_attachment.json.jbuilder (0.4ms)
  Rendered attachments/_attachment.json.jbuilder (0.4ms)
  Rendered attachments/index.json.jbuilder (76.0ms)
Completed 200 OK in 99ms (Views: 48.2ms | ActiveRecord: 45.7ms)
  [1m[36mAttachment Load (3.6ms)[0m  [1mSELECT "attachments".* FROM "attachments"[0m


Started GET "/attachments/3." for ::1 at 2016-09-10 13:34:35 +0200

ActionController::RoutingError (No route matches [GET] "/attachments/3."):
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (7.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_route.html.erb (1.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_table.html.erb (5.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (75.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (47.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (90.1ms)


Started GET "/attachments/3" for ::1 at 2016-09-10 13:34:37 +0200
Processing by AttachmentsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mAttachment Load (0.3ms)[0m  [1mSELECT  "attachments".* FROM "attachments" WHERE "attachments"."id" = $1 LIMIT 1[0m  [["id", 3]]
  Rendered attachments/show.html.erb within layouts/application (0.8ms)
Completed 500 Internal Server Error in 199ms (ActiveRecord: 0.5ms)

ActionView::Template::Error (couldn't find file 'jquery' with type 'application/javascript'
Checked in these paths: 
  /Users/yali/My_apps/TBB/app/assets/images
  /Users/yali/My_apps/TBB/app/assets/javascripts
  /Users/yali/My_apps/TBB/app/assets/stylesheets
  /Users/yali/My_apps/TBB/vendor/assets/javascripts
  /Users/yali/My_apps/TBB/vendor/assets/stylesheets
  /Users/yali/.rvm/gems/ruby-2.2.1/gems/turbolinks-source-5.0.0/lib/assets/javascripts):
    2: <html>
    3: <head>
    4:   <title>TBB</title>
    5:   <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
    6:   <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
    7:   <%= csrf_meta_tags %>
    8: </head>
  app/assets/javascripts/application.js:13
  app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb___138679883615237551_70272720340080'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (11.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (57.0ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (32.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (71.5ms)


Started GET "/attachments/3" for ::1 at 2016-09-10 13:36:10 +0200
Processing by AttachmentsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[35mAttachment Load (3.2ms)[0m  SELECT  "attachments".* FROM "attachments" WHERE "attachments"."id" = $1 LIMIT 1  [["id", 3]]
  Rendered attachments/show.html.erb within layouts/application (0.4ms)
Completed 500 Internal Server Error in 37ms (ActiveRecord: 7.3ms)

ActionView::Template::Error (couldn't find file 'jquery' with type 'application/javascript'
Checked in these paths: 
  /Users/yali/My_apps/TBB/app/assets/images
  /Users/yali/My_apps/TBB/app/assets/javascripts
  /Users/yali/My_apps/TBB/app/assets/stylesheets
  /Users/yali/My_apps/TBB/vendor/assets/javascripts
  /Users/yali/My_apps/TBB/vendor/assets/stylesheets
  /Users/yali/.rvm/gems/ruby-2.2.1/gems/turbolinks-source-5.0.0/lib/assets/javascripts):
    2: <html>
    3: <head>
    4:   <title>TBB</title>
    5:   <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
    6:   <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
    7:   <%= csrf_meta_tags %>
    8: </head>
  app/assets/javascripts/application.js:13
  app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb___138679883615237551_70272720340080'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (7.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (44.0ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (32.7ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (71.8ms)


Started GET "/attachments/3" for ::1 at 2016-09-10 13:39:47 +0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by AttachmentsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[35mAttachment Load (3.0ms)[0m  SELECT  "attachments".* FROM "attachments" WHERE "attachments"."id" = $1 LIMIT 1  [["id", 3]]
  Rendered attachments/show.html.erb within layouts/application (1.3ms)
Completed 500 Internal Server Error in 204ms (ActiveRecord: 10.5ms)

ActionView::Template::Error (couldn't find file 'jquery' with type 'application/javascript'
Checked in these paths: 
  /Users/yali/My_apps/TBB/app/assets/images
  /Users/yali/My_apps/TBB/app/assets/javascripts
  /Users/yali/My_apps/TBB/app/assets/stylesheets
  /Users/yali/My_apps/TBB/vendor/assets/javascripts
  /Users/yali/My_apps/TBB/vendor/assets/stylesheets
  /Users/yali/.rvm/gems/ruby-2.2.1/gems/turbolinks-source-5.0.0/lib/assets/javascripts):
    2: <html>
    3: <head>
    4:   <title>TBB</title>
    5:   <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
    6:   <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
    7:   <%= csrf_meta_tags %>
    8: </head>
  app/assets/javascripts/application.js:13
  app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb__3023080697224328948_70276085764360'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (13.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (10.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (59.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (54.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (100.4ms)


Started GET "/attachments/3" for ::1 at 2016-09-10 13:40:40 +0200
Processing by AttachmentsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mAttachment Load (3.2ms)[0m  [1mSELECT  "attachments".* FROM "attachments" WHERE "attachments"."id" = $1 LIMIT 1[0m  [["id", 3]]
  Rendered attachments/show.html.erb within layouts/application (0.3ms)
Completed 500 Internal Server Error in 42ms (ActiveRecord: 7.1ms)

ActionView::Template::Error (couldn't find file 'jquery' with type 'application/javascript'
Checked in these paths: 
  /Users/yali/My_apps/TBB/app/assets/images
  /Users/yali/My_apps/TBB/app/assets/javascripts
  /Users/yali/My_apps/TBB/app/assets/stylesheets
  /Users/yali/My_apps/TBB/vendor/assets/javascripts
  /Users/yali/My_apps/TBB/vendor/assets/stylesheets
  /Users/yali/.rvm/gems/ruby-2.2.1/gems/turbolinks-source-5.0.0/lib/assets/javascripts):
    2: <html>
    3: <head>
    4:   <title>TBB</title>
    5:   <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
    6:   <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
    7:   <%= csrf_meta_tags %>
    8: </head>
  app/assets/javascripts/application.js:13
  app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb__3023080697224328948_70276085764360'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (8.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (54.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (33.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (74.0ms)


Started GET "/attachments/3.json" for ::1 at 2016-09-10 13:41:59 +0200
Processing by AttachmentsController#show as JSON
  Parameters: {"id"=>"3"}
  [1m[35mAttachment Load (0.4ms)[0m  SELECT  "attachments".* FROM "attachments" WHERE "attachments"."id" = $1 LIMIT 1  [["id", 3]]
  Rendered attachments/_attachment.json.jbuilder (0.9ms)
  Rendered attachments/show.json.jbuilder (4.0ms)
Completed 200 OK in 21ms (Views: 18.9ms | ActiveRecord: 0.4ms)


Started GET "/attachments/3" for ::1 at 2016-09-10 13:42:15 +0200
Processing by AttachmentsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mAttachment Load (0.2ms)[0m  [1mSELECT  "attachments".* FROM "attachments" WHERE "attachments"."id" = $1 LIMIT 1[0m  [["id", 3]]
  Rendered attachments/_attachment.json.jbuilder (0.4ms)
  Rendered attachments/show.json.jbuilder (1.2ms)
Completed 200 OK in 20ms (Views: 12.8ms | ActiveRecord: 1.0ms)


Started GET "/attachments/3" for ::1 at 2016-09-10 14:23:33 +0200
Processing by AttachmentsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[35mAttachment Load (0.2ms)[0m  SELECT  "attachments".* FROM "attachments" WHERE "attachments"."id" = $1 LIMIT 1  [["id", 3]]
  Rendered attachments/_attachment.json.jbuilder (0.4ms)
  Rendered attachments/show.json.jbuilder (1.1ms)
Completed 200 OK in 16ms (Views: 9.6ms | ActiveRecord: 0.2ms)


Started GET "/attachments" for ::1 at 2016-09-10 14:23:39 +0200
Processing by AttachmentsController#index as */*
  [1m[36mAttachment Load (0.3ms)[0m  [1mSELECT "attachments".* FROM "attachments"[0m
  Rendered attachments/_attachment.json.jbuilder (0.4ms)
  Rendered attachments/_attachment.json.jbuilder (0.1ms)
  Rendered attachments/_attachment.json.jbuilder (0.1ms)
  Rendered attachments/index.json.jbuilder (3.7ms)
Completed 200 OK in 19ms (Views: 17.7ms | ActiveRecord: 0.3ms)


Started GET "/attachments" for ::1 at 2016-09-10 14:30:54 +0200
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by AttachmentsController#index as */*
  [1m[35mAttachment Load (3.6ms)[0m  SELECT "attachments".* FROM "attachments"
  Rendered attachments/_attachment.json.jbuilder (0.5ms)
  Rendered attachments/_attachment.json.jbuilder (0.2ms)
  Rendered attachments/_attachment.json.jbuilder (0.2ms)
  Rendered attachments/index.json.jbuilder (21.9ms)
Completed 200 OK in 48ms (Views: 25.2ms | ActiveRecord: 10.4ms)


Started GET "/reviews" for ::1 at 2016-09-10 14:32:04 +0200

ActionController::RoutingError (No route matches [GET] "/reviews"):
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (8.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_route.html.erb (1.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_table.html.erb (5.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (72.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (50.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (95.2ms)


Started GET "/reviews" for ::1 at 2016-09-10 14:32:52 +0200
Processing by ReviewsController#index as */*
  [1m[36mReview Load (11.3ms)[0m  [1mSELECT "reviews".* FROM "reviews"[0m
  Rendered reviews/index.json.jbuilder (13.5ms)
Completed 200 OK in 28ms (Views: 12.6ms | ActiveRecord: 11.9ms)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (8.3ms)[0m  [1mINSERT INTO "reviews" ("content", "title", "score", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "good"], ["title", "hi"], ["score", 10.0], ["created_at", "2016-09-10 12:33:30.073424"], ["updated_at", "2016-09-10 12:33:30.073424"]]
  [1m[35m (3.8ms)[0m  COMMIT


Started GET "/reviews" for ::1 at 2016-09-10 14:33:32 +0200
Processing by ReviewsController#index as */*
  [1m[35mReview Load (11.9ms)[0m  SELECT "reviews".* FROM "reviews"
  Rendered reviews/_review.json.jbuilder (0.5ms)
  Rendered reviews/index.json.jbuilder (24.2ms)
Completed 200 OK in 39ms (Views: 23.1ms | ActiveRecord: 14.7ms)


Started GET "/reviews" for ::1 at 2016-09-10 14:34:17 +0200
Processing by ReviewsController#index as */*
  [1m[36mReview Load (0.8ms)[0m  [1mSELECT "reviews".* FROM "reviews"[0m
  Rendered reviews/_review.json.jbuilder (0.7ms)
  Rendered reviews/index.json.jbuilder (5.3ms)
Completed 200 OK in 20ms (Views: 18.3ms | ActiveRecord: 0.8ms)
  [1m[36mTouristAttraction Load (16.6ms)[0m  [1mSELECT  "tourist_attractions".* FROM "tourist_attractions"  ORDER BY "tourist_attractions"."id" ASC LIMIT 1[0m
  [1m[35mTouristAttractionDetail Load (7.7ms)[0m  SELECT  "tourist_attraction_details".* FROM "tourist_attraction_details"  ORDER BY "tourist_attraction_details"."id" ASC LIMIT 1
  [1m[36mTour Load (15.4ms)[0m  [1mSELECT  "tours".* FROM "tours"  ORDER BY "tours"."id" ASC LIMIT 1[0m


Started GET "/reviews" for ::1 at 2016-09-10 15:40:41 +0200
  [1m[36mActiveRecord::SchemaMigration Load (2.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ReviewsController#index as */*
  Rendered reviews/index.html.erb within layouts/application (14.3ms)
Completed 500 Internal Server Error in 47ms (ActiveRecord: 0.0ms)

ActionView::Template::Error (undefined method `each' for nil:NilClass):
    10:   </thead>
    11: 
    12:   <tbody>
    13:     <% @reviews.each do |review| %>
    14:       <tr>
    15:         <td><%= link_to 'Show', review %></td>
    16:         <td><%= link_to 'Edit', edit_review_path(review) %></td>
  app/views/reviews/index.html.erb:13:in `_app_views_reviews_index_html_erb__4416475243857865254_70327563296380'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (49.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (86.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (137.2ms)


Started GET "/reviews" for ::1 at 2016-09-10 15:40:44 +0200
Processing by ReviewsController#index as */*
  Rendered reviews/index.html.erb within layouts/application (9.4ms)
Completed 500 Internal Server Error in 23ms (ActiveRecord: 0.0ms)

ActionView::Template::Error (undefined method `each' for nil:NilClass):
    10:   </thead>
    11: 
    12:   <tbody>
    13:     <% @reviews.each do |review| %>
    14:       <tr>
    15:         <td><%= link_to 'Show', review %></td>
    16:         <td><%= link_to 'Edit', edit_review_path(review) %></td>
  app/views/reviews/index.html.erb:13:in `_app_views_reviews_index_html_erb__4416475243857865254_70327563296380'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (46.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (34.7ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (75.9ms)


Started GET "/reviews/1" for ::1 at 2016-09-10 15:40:49 +0200
Processing by ReviewsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35mReview Load (3.3ms)[0m  SELECT  "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered reviews/_review.json.jbuilder (0.6ms)
  Rendered reviews/show.json.jbuilder (12.6ms)
Completed 200 OK in 77ms (Views: 21.8ms | ActiveRecord: 15.0ms)


Started GET "/tours" for ::1 at 2016-09-10 15:40:57 +0200
Processing by ToursController#index as */*
  [1m[36mTour Load (3.3ms)[0m  [1mSELECT "tours".* FROM "tours"[0m
  Rendered tours/_tour.json.jbuilder (21.6ms)
  Rendered tours/index.json.jbuilder (32.5ms)
Completed 200 OK in 63ms (Views: 48.0ms | ActiveRecord: 4.3ms)
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (4.1ms)[0m  [1mINSERT INTO "attachment_types" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "image"], ["created_at", "2016-09-10 13:46:46.067347"], ["updated_at", "2016-09-10 13:46:46.067347"]]
  [1m[35m (1.8ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "attachment_types" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "audio"], ["created_at", "2016-09-10 13:46:46.076635"], ["updated_at", "2016-09-10 13:46:46.076635"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (4.3ms)[0m  [1mINSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Syria"], ["code", "SY"], ["created_at", "2016-09-10 13:46:46.085642"], ["updated_at", "2016-09-10 13:46:46.085642"]]
  [1m[35m (1.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "Germany"], ["code", "DE"], ["created_at", "2016-09-10 13:46:46.092987"], ["updated_at", "2016-09-10 13:46:46.092987"]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "USA"], ["code", "US"], ["created_at", "2016-09-10 13:46:46.095416"], ["updated_at", "2016-09-10 13:46:46.095416"]]
  [1m[35m (1.0ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (8.2ms)[0m  INSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "Damascus"], ["country_id", 1], ["created_at", "2016-09-10 13:46:46.107834"], ["updated_at", "2016-09-10 13:46:46.107834"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Berlin"], ["country_id", 2], ["created_at", "2016-09-10 13:46:46.119143"], ["updated_at", "2016-09-10 13:46:46.119143"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "NY"], ["country_id", 3], ["created_at", "2016-09-10 13:46:46.122313"], ["updated_at", "2016-09-10 13:46:46.122313"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mAttachmentType Load (5.4ms)[0m  SELECT "attachment_types".* FROM "attachment_types"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (6.4ms)[0m  DELETE FROM "attachment_types" WHERE "attachment_types"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35mTour Load (0.5ms)[0m  SELECT  "tours".* FROM "tours"  ORDER BY "tours"."id" ASC LIMIT 1
  [1m[36mCity Load (0.8ms)[0m  [1mSELECT  "cities".* FROM "cities"  ORDER BY "cities"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "tours" SET "city_id" = $1, "updated_at" = $2 WHERE "tours"."id" = $3[0m  [["city_id", 1], ["updated_at", "2016-09-10 13:48:53.970407"], ["id", 1]]
  [1m[35m (1.3ms)[0m  COMMIT


Started GET "/tours" for ::1 at 2016-09-10 15:48:56 +0200
Processing by ToursController#index as */*
  [1m[35mTour Load (0.5ms)[0m  SELECT "tours".* FROM "tours"
  [1m[36mCity Load (5.4ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered tours/_tour.json.jbuilder (28.4ms)
  Rendered tours/index.json.jbuilder (31.5ms)
Completed 200 OK in 50ms (Views: 41.8ms | ActiveRecord: 7.5ms)


Started GET "/tours" for ::1 at 2016-09-10 15:52:11 +0200
Processing by ToursController#index as */*
  [1m[35mTour Load (0.5ms)[0m  SELECT "tours".* FROM "tours"
  [1m[36mCity Load (0.3ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCountry Load (1.6ms)[0m  SELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered tours/_tour.json.jbuilder (14.3ms)
  Rendered tours/index.json.jbuilder (17.2ms)
Completed 200 OK in 34ms (Views: 29.5ms | ActiveRecord: 3.3ms)


Started GET "/tours/1" for ::1 at 2016-09-10 15:52:37 +0200
Processing by ToursController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mTour Load (0.4ms)[0m  [1mSELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCity Load (0.2ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCountry Load (0.3ms)[0m  [1mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered tours/_tour.json.jbuilder (2.1ms)
  Rendered tours/show.json.jbuilder (3.2ms)
Completed 200 OK in 21ms (Views: 17.0ms | ActiveRecord: 0.9ms)


Started GET "/tours/2" for ::1 at 2016-09-10 15:52:39 +0200
Processing by ToursController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35mTour Load (0.4ms)[0m  SELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1  [["id", 2]]
Completed 404 Not Found in 2ms (ActiveRecord: 0.4ms)

ActiveRecord::RecordNotFound (Couldn't find Tour with 'id'=2):
  app/controllers/tours_controller.rb:61:in `set_tour'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (39.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (44.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (83.5ms)
  [1m[36mTour Load (0.2ms)[0m  [1mSELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1[0m  [["id", 2]]


Started GET "/tours/2" for ::1 at 2016-09-10 15:54:57 +0200
Processing by ToursController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mTour Load (2.7ms)[0m  [1mSELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1[0m  [["id", 2]]
Completed 404 Not Found in 13ms (Views: 0.2ms | ActiveRecord: 6.9ms)


Started GET "/tours/1" for ::1 at 2016-09-10 15:55:21 +0200
Processing by ToursController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35mTour Load (0.4ms)[0m  SELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCity Load (1.9ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCountry Load (1.4ms)[0m  SELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered tours/_tour.json.jbuilder (19.7ms)
  Rendered tours/show.json.jbuilder (20.4ms)
Completed 200 OK in 39ms (Views: 24.8ms | ActiveRecord: 5.5ms)


Started GET "/tourist_attractions" for ::1 at 2016-09-10 15:57:07 +0200
Processing by TouristAttractionsController#index as */*
  Rendered tourist_attractions/index.html.erb within layouts/application (10.4ms)
Completed 500 Internal Server Error in 25ms (ActiveRecord: 0.0ms)

ActionView::Template::Error (undefined method `each' for nil:NilClass):
    10:   </thead>
    11: 
    12:   <tbody>
    13:     <% @tourist_attractions.each do |tourist_attraction| %>
    14:       <tr>
    15:         <td><%= link_to 'Show', tourist_attraction %></td>
    16:         <td><%= link_to 'Edit', edit_tourist_attraction_path(tourist_attraction) %></td>
  app/views/tourist_attractions/index.html.erb:13:in `_app_views_tourist_attractions_index_html_erb___2090888487552822111_70327574087580'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (43.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (37.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (77.0ms)


Started GET "/tourist_attraction/1" for ::1 at 2016-09-10 15:57:12 +0200

ActionController::RoutingError (No route matches [GET] "/tourist_attraction/1"):
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_route.html.erb (2.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_table.html.erb (13.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (86.0ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (34.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (77.5ms)


Started GET "/tourist_attractions/1" for ::1 at 2016-09-10 15:57:22 +0200
Processing by TouristAttractionsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mTouristAttraction Load (3.8ms)[0m  [1mSELECT  "tourist_attractions".* FROM "tourist_attractions" WHERE "tourist_attractions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered tourist_attractions/_tourist_attraction.json.jbuilder (0.4ms)
  Rendered tourist_attractions/show.json.jbuilder (1.6ms)
Completed 200 OK in 42ms (Views: 12.8ms | ActiveRecord: 6.0ms)


Started GET "/tourist_attractions/1" for ::1 at 2016-09-10 15:58:51 +0200
Processing by TouristAttractionsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35mTouristAttraction Load (3.6ms)[0m  SELECT  "tourist_attractions".* FROM "tourist_attractions" WHERE "tourist_attractions"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered tourist_attractions/_tourist_attraction.json.jbuilder (36.1ms)
  [1m[36mAttachment Load (3.3ms)[0m  [1mSELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_id" = $1 AND "attachments"."attachment_type_id" = 1[0m  [["tourist_attraction_id", 1]]
  Rendered tourist_attractions/show.json.jbuilder (45.6ms)
Completed 200 OK in 66ms (Views: 55.8ms | ActiveRecord: 8.0ms)


Started GET "/tourist_attractions/1" for ::1 at 2016-09-10 16:01:16 +0200
Processing by TouristAttractionsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35mTouristAttraction Load (0.2ms)[0m  SELECT  "tourist_attractions".* FROM "tourist_attractions" WHERE "tourist_attractions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mAttachment Load (0.3ms)[0m  [1mSELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_id" = $1 AND "attachments"."attachment_type_id" = 1[0m  [["tourist_attraction_id", 1]]
  Rendered tourist_attractions/_tourist_attraction.json.jbuilder (8.0ms)
  Rendered tourist_attractions/show.json.jbuilder (15.3ms)
Completed 200 OK in 35ms (Views: 24.5ms | ActiveRecord: 1.2ms)


Started GET "/tourist_attractions/1" for ::1 at 2016-09-10 16:03:18 +0200
Processing by TouristAttractionsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35mTouristAttraction Load (0.3ms)[0m  SELECT  "tourist_attractions".* FROM "tourist_attractions" WHERE "tourist_attractions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mAttachment Load (0.3ms)[0m  [1mSELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_id" = $1 AND "attachments"."attachment_type_id" = 1[0m  [["tourist_attraction_id", 1]]
  [1m[35mAttachment Load (0.2ms)[0m  SELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_id" = $1 AND "attachments"."attachment_type_id" = 2  [["tourist_attraction_id", 1]]
  Rendered tourist_attractions/_tourist_attraction.json.jbuilder (14.0ms)
  Rendered tourist_attractions/show.json.jbuilder (14.8ms)
Completed 500 Internal Server Error in 37ms (ActiveRecord: 0.7ms)

ActionView::Template::Error (undefined method `url' for #<Attachment::ActiveRecord_Associations_CollectionProxy:0x007fecd40fb400>):
    1: json.extract! tourist_attraction, :id, :title, :description, :trans_info, :address, :latitude , :longitude ,:created_at, :updated_at
    2: 
    3: json.images tourist_attraction.images_urls
    4: json.audios tourist_attraction.audios_urls
  app/models/tourist_attraction.rb:17:in `block in audios_urls'
  app/models/tourist_attraction.rb:17:in `audios_urls'
  app/views/tourist_attractions/_tourist_attraction.json.jbuilder:4:in `_app_views_tourist_attractions__tourist_attraction_json_jbuilder___490274772195304730_70327590083540'
  app/views/tourist_attractions/show.json.jbuilder:1:in `_app_views_tourist_attractions_show_json_jbuilder___4324395930877529941_70327573665720'
  app/controllers/tourist_attractions_controller.rb:9:in `show'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (54.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.7ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (38.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (81.5ms)


Started GET "/tourist_attractions/1" for ::1 at 2016-09-10 16:04:00 +0200
Processing by TouristAttractionsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mTouristAttraction Load (0.3ms)[0m  [1mSELECT  "tourist_attractions".* FROM "tourist_attractions" WHERE "tourist_attractions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mAttachment Load (0.3ms)[0m  SELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_id" = $1 AND "attachments"."attachment_type_id" = 1  [["tourist_attraction_id", 1]]
  [1m[36mAttachment Load (0.2ms)[0m  [1mSELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_id" = $1 AND "attachments"."attachment_type_id" = 2[0m  [["tourist_attraction_id", 1]]
  Rendered tourist_attractions/_tourist_attraction.json.jbuilder (10.1ms)
  Rendered tourist_attractions/show.json.jbuilder (10.9ms)
Completed 200 OK in 30ms (Views: 19.9ms | ActiveRecord: 0.8ms)


Started GET "/tourist_attraction_details/1" for ::1 at 2016-09-10 16:07:05 +0200
Processing by TouristAttractionDetailsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35mTouristAttractionDetail Load (1.5ms)[0m  SELECT  "tourist_attraction_details".* FROM "tourist_attraction_details" WHERE "tourist_attraction_details"."id" = $1 LIMIT 1  [["id", 1]]
Completed 404 Not Found in 7ms (Views: 0.2ms | ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "tourist_attraction_details" ("title", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["title", "hi"], ["description", "dfddf"], ["created_at", "2016-09-10 14:08:49.098259"], ["updated_at", "2016-09-10 14:08:49.098259"]]
  [1m[35m (1.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "attachments" ("url", "tourist_attraction_detail_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["url", "working image!"], ["tourist_attraction_detail_id", 1], ["created_at", "2016-09-10 14:09:40.062689"], ["updated_at", "2016-09-10 14:09:40.062689"]]
  [1m[36m (1.3ms)[0m  [1mCOMMIT[0m
  [1m[35mAttachment Load (0.5ms)[0m  SELECT  "attachments".* FROM "attachments"  ORDER BY "attachments"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  INSERT INTO "attachments" ("attachment_type_id", "tourist_attraction_detail_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["attachment_type_id", 2], ["tourist_attraction_detail_id", 1], ["url", "working audio!"], ["created_at", "2016-09-10 14:10:59.274132"], ["updated_at", "2016-09-10 14:10:59.274132"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m


Started GET "/tourist_attraction_details/1" for ::1 at 2016-09-10 16:11:04 +0200
Processing by TouristAttractionDetailsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mTouristAttractionDetail Load (3.9ms)[0m  [1mSELECT  "tourist_attraction_details".* FROM "tourist_attraction_details" WHERE "tourist_attraction_details"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mAttachment Load (3.5ms)[0m  SELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_detail_id" = $1 AND "attachments"."attachment_type_id" = 1  [["tourist_attraction_detail_id", 1]]
  [1m[36mAttachment Load (0.2ms)[0m  [1mSELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_detail_id" = $1 AND "attachments"."attachment_type_id" = 2[0m  [["tourist_attraction_detail_id", 1]]
  Rendered tourist_attraction_details/_tourist_attraction_detail.json.jbuilder (18.4ms)
  Rendered tourist_attraction_details/show.json.jbuilder (23.6ms)
Completed 200 OK in 54ms (Views: 37.4ms | ActiveRecord: 9.6ms)
  [1m[35mAttachment Load (0.5ms)[0m  SELECT  "attachments".* FROM "attachments"  ORDER BY "attachments"."id" DESC LIMIT 1
  [1m[36mAttachment Load (0.3ms)[0m  [1mSELECT  "attachments".* FROM "attachments" WHERE "attachments"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m


Started GET "/tourist_attraction_details/1" for ::1 at 2016-09-10 16:12:04 +0200
Processing by TouristAttractionDetailsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35mTouristAttractionDetail Load (0.4ms)[0m  SELECT  "tourist_attraction_details".* FROM "tourist_attraction_details" WHERE "tourist_attraction_details"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mAttachment Load (0.2ms)[0m  [1mSELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_detail_id" = $1 AND "attachments"."attachment_type_id" = 1[0m  [["tourist_attraction_detail_id", 1]]
  [1m[35mAttachment Load (0.3ms)[0m  SELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_detail_id" = $1 AND "attachments"."attachment_type_id" = 2  [["tourist_attraction_detail_id", 1]]
  Rendered tourist_attraction_details/_tourist_attraction_detail.json.jbuilder (5.2ms)
  Rendered tourist_attraction_details/show.json.jbuilder (7.0ms)
Completed 200 OK in 22ms (Views: 19.3ms | ActiveRecord: 0.9ms)
  [1m[35mAttachment Load (0.2ms)[0m  SELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_detail_id" = $1 AND "attachments"."attachment_type_id" = 1  [["tourist_attraction_detail_id", 1]]
  [1m[36mAttachment Load (0.4ms)[0m  [1mSELECT  "attachments".* FROM "attachments" WHERE "attachments"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "attachments" SET "attachment_type_id" = $1, "updated_at" = $2 WHERE "attachments"."id" = $3[0m  [["attachment_type_id", 1], ["updated_at", "2016-09-10 14:13:08.696243"], ["id", 4]]
  [1m[35m (1.2ms)[0m  COMMIT


Started GET "/tourist_attraction_details/1" for ::1 at 2016-09-10 16:13:10 +0200
Processing by TouristAttractionDetailsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mTouristAttractionDetail Load (0.4ms)[0m  [1mSELECT  "tourist_attraction_details".* FROM "tourist_attraction_details" WHERE "tourist_attraction_details"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mAttachment Load (0.3ms)[0m  SELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_detail_id" = $1 AND "attachments"."attachment_type_id" = 1  [["tourist_attraction_detail_id", 1]]
  [1m[36mAttachment Load (0.3ms)[0m  [1mSELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_detail_id" = $1 AND "attachments"."attachment_type_id" = 2[0m  [["tourist_attraction_detail_id", 1]]
  Rendered tourist_attraction_details/_tourist_attraction_detail.json.jbuilder (5.1ms)
  Rendered tourist_attraction_details/show.json.jbuilder (6.5ms)
Completed 200 OK in 26ms (Views: 23.4ms | ActiveRecord: 1.0ms)


Started GET "/tour/1" for ::1 at 2016-09-10 16:21:06 +0200

ActionController::RoutingError (No route matches [GET] "/tour/1"):
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (10.0ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_route.html.erb (11.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_table.html.erb (2.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (148.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (1.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (82.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.7ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (180.8ms)


Started GET "/tours/1" for ::1 at 2016-09-10 16:21:09 +0200
Processing by ToursController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35mTour Load (1.2ms)[0m  SELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCity Load (1.1ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCountry Load (0.3ms)[0m  SELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered tours/_tour.json.jbuilder (77.1ms)
  Rendered tours/show.json.jbuilder (80.0ms)
Completed 200 OK in 145ms (Views: 100.3ms | ActiveRecord: 15.7ms)


Started GET "/tourist_attractions/1" for ::1 at 2016-09-10 16:21:26 +0200
Processing by TouristAttractionsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mTouristAttraction Load (0.3ms)[0m  [1mSELECT  "tourist_attractions".* FROM "tourist_attractions" WHERE "tourist_attractions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mAttachment Load (0.9ms)[0m  SELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_id" = $1 AND "attachments"."attachment_type_id" = 1  [["tourist_attraction_id", 1]]
  [1m[36mAttachment Load (0.5ms)[0m  [1mSELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_id" = $1 AND "attachments"."attachment_type_id" = 2[0m  [["tourist_attraction_id", 1]]
  Rendered tourist_attractions/_tourist_attraction.json.jbuilder (22.9ms)
  Rendered tourist_attractions/show.json.jbuilder (25.6ms)
Completed 200 OK in 119ms (Views: 80.7ms | ActiveRecord: 1.7ms)


Started GET "/tourist_attraction_details/1" for ::1 at 2016-09-10 16:21:52 +0200
Processing by TouristAttractionDetailsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35mTouristAttractionDetail Load (2.0ms)[0m  SELECT  "tourist_attraction_details".* FROM "tourist_attraction_details" WHERE "tourist_attraction_details"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mAttachment Load (2.8ms)[0m  [1mSELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_detail_id" = $1 AND "attachments"."attachment_type_id" = 1[0m  [["tourist_attraction_detail_id", 1]]
  [1m[35mAttachment Load (3.4ms)[0m  SELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_detail_id" = $1 AND "attachments"."attachment_type_id" = 2  [["tourist_attraction_detail_id", 1]]
  Rendered tourist_attraction_details/_tourist_attraction_detail.json.jbuilder (16.8ms)
  Rendered tourist_attraction_details/show.json.jbuilder (19.7ms)
Completed 200 OK in 39ms (Views: 29.0ms | ActiveRecord: 8.2ms)


Started GET "/reviews/1" for ::1 at 2016-09-10 16:21:57 +0200
Processing by ReviewsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mReview Load (6.6ms)[0m  [1mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered reviews/_review.json.jbuilder (0.3ms)
  Rendered reviews/show.json.jbuilder (5.3ms)
Completed 200 OK in 75ms (Views: 27.2ms | ActiveRecord: 10.0ms)


Started GET "/attachments/1" for ::1 at 2016-09-10 16:23:01 +0200
Processing by AttachmentsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35mAttachment Load (0.5ms)[0m  SELECT  "attachments".* FROM "attachments" WHERE "attachments"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered attachments/_attachment.json.jbuilder (0.9ms)
  Rendered attachments/show.json.jbuilder (4.5ms)
Completed 200 OK in 31ms (Views: 27.3ms | ActiveRecord: 0.5ms)


Started GET "/tour/1/tourist_attractions" for ::1 at 2016-09-10 16:33:53 +0200

ActionController::RoutingError (No route matches [GET] "/tour/1/tourist_attractions"):
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (67.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.7ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (37.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (84.5ms)


Started GET "/tour/1/tourist_attractions" for ::1 at 2016-09-10 16:34:24 +0200
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActionController::RoutingError (No route matches [GET] "/tour/1/tourist_attractions"):
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_route.html.erb (2.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_table.html.erb (14.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (10.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (119.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (76.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (115.8ms)


Started GET "/tours/1/tourist_attractions" for ::1 at 2016-09-10 16:35:20 +0200
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ToursController#tourist_attractions as */*
  Parameters: {"id"=>"1"}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `tourist_attractions' for nil:NilClass):
  app/controllers/tours_controller.rb:60:in `tourist_attractions'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (47.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (48.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (94.3ms)


Started GET "/tours/1/tourist_attractions" for ::1 at 2016-09-10 16:35:51 +0200
Processing by ToursController#tourist_attractions as */*
  Parameters: {"id"=>"1"}
  [1m[35mTour Load (3.0ms)[0m  SELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTouristAttraction Load (2.2ms)[0m  [1mSELECT "tourist_attractions".* FROM "tourist_attractions" WHERE "tourist_attractions"."tour_id" = $1[0m  [["tour_id", 1]]
Completed 200 OK in 84ms (Views: 1.6ms | ActiveRecord: 10.5ms)
  [1m[36mTouristAttraction Load (0.4ms)[0m  [1mSELECT "tourist_attractions".* FROM "tourist_attractions"[0m
  [1m[35mTour Load (0.5ms)[0m  SELECT  "tours".* FROM "tours"  ORDER BY "tours"."id" ASC LIMIT 1
  [1m[36mTouristAttraction Load (0.5ms)[0m  [1mSELECT  "tourist_attractions".* FROM "tourist_attractions"  ORDER BY "tourist_attractions"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "tourist_attractions" SET "tour_id" = $1, "updated_at" = $2 WHERE "tourist_attractions"."id" = $3[0m  [["tour_id", 1], ["updated_at", "2016-09-10 14:36:36.443009"], ["id", 1]]
  [1m[35m (1.3ms)[0m  COMMIT


Started GET "/tours/1/tourist_attractions" for ::1 at 2016-09-10 16:37:44 +0200
Processing by ToursController#tourist_attractions as */*
  Parameters: {"id"=>"1"}
  [1m[35mTour Load (5.3ms)[0m  SELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTouristAttraction Load (3.9ms)[0m  [1mSELECT "tourist_attractions".* FROM "tourist_attractions" WHERE "tourist_attractions"."tour_id" = $1[0m  [["tour_id", 1]]
Completed 200 OK in 47ms (Views: 11.8ms | ActiveRecord: 22.4ms)


Started GET "/tours/1/tourist_attractions" for ::1 at 2016-09-10 16:43:15 +0200
Processing by ToursController#tourist_attractions as */*
  Parameters: {"id"=>"1"}
  [1m[35mTour Load (0.4ms)[0m  SELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTouristAttraction Load (0.3ms)[0m  [1mSELECT "tourist_attractions".* FROM "tourist_attractions" WHERE "tourist_attractions"."tour_id" = $1[0m  [["tour_id", 1]]
Completed 200 OK in 16ms (Views: 2.5ms | ActiveRecord: 0.7ms)


Started GET "/tourist_attractions" for ::1 at 2016-09-10 16:43:30 +0200
Processing by TouristAttractionsController#index as */*
  Rendered tourist_attractions/index.html.erb within layouts/application (9.5ms)
Completed 500 Internal Server Error in 30ms (ActiveRecord: 0.0ms)

ActionView::Template::Error (undefined method `each' for nil:NilClass):
    10:   </thead>
    11: 
    12:   <tbody>
    13:     <% @tourist_attractions.each do |tourist_attraction| %>
    14:       <tr>
    15:         <td><%= link_to 'Show', tourist_attraction %></td>
    16:         <td><%= link_to 'Edit', edit_tourist_attraction_path(tourist_attraction) %></td>
  app/views/tourist_attractions/index.html.erb:13:in `_app_views_tourist_attractions_index_html_erb__43862273443686778_70298009788720'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (46.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (32.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (73.5ms)


Started GET "/tourist_attractions" for ::1 at 2016-09-10 16:43:31 +0200
Processing by TouristAttractionsController#index as */*
  Rendered tourist_attractions/index.html.erb within layouts/application (7.9ms)
Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.0ms)

ActionView::Template::Error (undefined method `each' for nil:NilClass):
    10:   </thead>
    11: 
    12:   <tbody>
    13:     <% @tourist_attractions.each do |tourist_attraction| %>
    14:       <tr>
    15:         <td><%= link_to 'Show', tourist_attraction %></td>
    16:         <td><%= link_to 'Edit', edit_tourist_attraction_path(tourist_attraction) %></td>
  app/views/tourist_attractions/index.html.erb:13:in `_app_views_tourist_attractions_index_html_erb__43862273443686778_70298009788720'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (55.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (42.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (96.6ms)


Started GET "/tourist_attractions" for ::1 at 2016-09-10 16:44:25 +0200
Processing by TouristAttractionsController#index as */*
  [1m[35mTouristAttraction Load (0.3ms)[0m  SELECT "tourist_attractions".* FROM "tourist_attractions"
  [1m[36mAttachment Load (3.1ms)[0m  [1mSELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_id" = $1 AND "attachments"."attachment_type_id" = 1[0m  [["tourist_attraction_id", 1]]
  [1m[35mAttachment Load (0.2ms)[0m  SELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_id" = $1 AND "attachments"."attachment_type_id" = 2  [["tourist_attraction_id", 1]]
  Rendered tourist_attractions/_tourist_attraction.json.jbuilder (19.4ms)
  Rendered tourist_attractions/index.json.jbuilder (28.1ms)
Completed 500 Internal Server Error in 43ms (ActiveRecord: 4.9ms)

ActionView::Template::Error (Failed to add "test" property to an array):
    1: json.array! @tourist_attractions, partial: 'tourist_attractions/tourist_attraction', as: :tourist_attraction
    2: json.test 10
  app/views/tourist_attractions/index.json.jbuilder:2:in `_app_views_tourist_attractions_index_json_jbuilder___2173192210889789652_70298009397860'
  app/controllers/tourist_attractions_controller.rb:8:in `index'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (46.7ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (32.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (77.4ms)


Started GET "/tours/1/tourist_attractions" for ::1 at 2016-09-10 16:48:28 +0200
Processing by ToursController#tourist_attractions as */*
  Parameters: {"id"=>"1"}
  [1m[36mTour Load (0.3ms)[0m  [1mSELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered tours/tourist_attractions.json.jbuilder (7.0ms)
Completed 200 OK in 41ms (Views: 19.4ms | ActiveRecord: 0.3ms)


Started GET "/tours/1/tourist_attractions" for ::1 at 2016-09-10 16:49:57 +0200
Processing by ToursController#tourist_attractions as */*
  Parameters: {"id"=>"1"}
  [1m[35mTour Load (0.3ms)[0m  SELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered tours/tourist_attractions.json.jbuilder (0.1ms)
Completed 200 OK in 25ms (Views: 9.0ms | ActiveRecord: 0.3ms)


Started GET "/tours/1/tourist_attractions" for ::1 at 2016-09-10 16:51:09 +0200
Processing by ToursController#tourist_attractions as */*
  Parameters: {"id"=>"1"}
  [1m[36mTour Load (1.4ms)[0m  [1mSELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTouristAttraction Load (0.3ms)[0m  SELECT "tourist_attractions".* FROM "tourist_attractions" WHERE "tourist_attractions"."tour_id" = $1  [["tour_id", 1]]
Completed 200 OK in 30ms (Views: 10.5ms | ActiveRecord: 4.5ms)


Started GET "/tours/1/tourist_attractions" for ::1 at 2016-09-10 16:51:41 +0200
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ToursController#tourist_attractions as */*
  Parameters: {"id"=>"1"}
  [1m[35mTour Load (2.5ms)[0m  SELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTouristAttraction Load (1.9ms)[0m  [1mSELECT "tourist_attractions".* FROM "tourist_attractions" WHERE "tourist_attractions"."tour_id" = $1[0m  [["tour_id", 1]]
Completed 200 OK in 79ms (Views: 9.1ms | ActiveRecord: 12.2ms)


Started GET "/tours/1/tourist_attractions" for ::1 at 2016-09-10 16:52:41 +0200
Processing by ToursController#tourist_attractions as */*
  Parameters: {"id"=>"1"}
  [1m[35mTour Load (2.5ms)[0m  SELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTouristAttraction Load (1.9ms)[0m  [1mSELECT "tourist_attractions".* FROM "tourist_attractions" WHERE "tourist_attractions"."tour_id" = $1[0m  [["tour_id", 1]]
  Rendered tours/tourist_attractions.json.jbuilder (12.5ms)
Completed 500 Internal Server Error in 41ms (ActiveRecord: 9.1ms)

ActionView::Template::Error (Missing partial tourist_attraction/_tourist_attraction with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:jbuilder]}. Searched in:
  * "/Users/yali/My_apps/TBB/app/views"
  * "/Users/yali/.rvm/gems/ruby-2.2.1/gems/devise_token_auth-0.1.39/app/views"
  * "/Users/yali/.rvm/gems/ruby-2.2.1/gems/devise-4.2.0/app/views"
):
    1: json.array! @tourist_attractions, partial: 'tourist_attraction/tourist_attraction', as: :tourist_attraction
  app/views/tours/tourist_attractions.json.jbuilder:1:in `_app_views_tours_tourist_attractions_json_jbuilder__2311215476432549254_70195974019100'
  app/controllers/tours_controller.rb:61:in `tourist_attractions'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (43.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (49.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (88.5ms)


Started GET "/tours/1/tourist_attractions" for ::1 at 2016-09-10 16:53:17 +0200
Processing by ToursController#tourist_attractions as */*
  Parameters: {"id"=>"1"}
  [1m[35mTour Load (0.4ms)[0m  SELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTouristAttraction Load (0.3ms)[0m  [1mSELECT "tourist_attractions".* FROM "tourist_attractions" WHERE "tourist_attractions"."tour_id" = $1[0m  [["tour_id", 1]]
  [1m[35mAttachment Load (5.5ms)[0m  SELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_id" = $1 AND "attachments"."attachment_type_id" = 1  [["tourist_attraction_id", 1]]
  [1m[36mAttachment Load (0.2ms)[0m  [1mSELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_id" = $1 AND "attachments"."attachment_type_id" = 2[0m  [["tourist_attraction_id", 1]]
  Rendered tourist_attractions/_tourist_attraction.json.jbuilder (21.9ms)
  Rendered tours/tourist_attractions.json.jbuilder (25.8ms)
Completed 200 OK in 45ms (Views: 32.5ms | ActiveRecord: 9.4ms)


Started GET "/tours/1/tourist_attractions" for ::1 at 2016-09-10 17:02:46 +0200

ActionController::RoutingError (No route matches [GET] "/tours/1/tourist_attractions"):
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_table.html.erb (7.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (76.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (35.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (1.0ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (79.5ms)


Started GET "/tours/1/tourist_attractions" for ::1 at 2016-09-10 17:02:59 +0200

ActionController::RoutingError (No route matches [GET] "/tours/1/tourist_attractions"):
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_route.html.erb (2.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (65.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (37.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (77.4ms)


Started GET "/tours/1/tourist_attractions" for ::1 at 2016-09-10 17:03:27 +0200

ActionController::RoutingError (No route matches [GET] "/tours/1/tourist_attractions"):
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_route.html.erb (2.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (69.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (39.0ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (81.4ms)


Started GET "/tours/1/tourist_attractions" for ::1 at 2016-09-10 17:04:35 +0200

ActionController::RoutingError (No route matches [GET] "/tours/1/tourist_attractions"):
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_route.html.erb (2.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (64.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (37.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (75.8ms)


Started GET "/tours/1/attractions" for ::1 at 2016-09-10 17:04:53 +0200
Processing by ToursController#attractions as */*
  Parameters: {"id"=>"1"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `attractions' for nil:NilClass):
  app/controllers/tours_controller.rb:60:in `attractions'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (39.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (42.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (84.6ms)


Started GET "/tours/1/attractions" for ::1 at 2016-09-10 17:05:30 +0200
Processing by ToursController#attractions as */*
  Parameters: {"id"=>"1"}
  [1m[35mTour Load (0.2ms)[0m  SELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTouristAttraction Load (0.3ms)[0m  [1mSELECT "tourist_attractions".* FROM "tourist_attractions" WHERE "tourist_attractions"."tour_id" = $1[0m  [["tour_id", 1]]
  [1m[35mAttachment Load (3.5ms)[0m  SELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_id" = $1 AND "attachments"."attachment_type_id" = 1  [["tourist_attraction_id", 1]]
  [1m[36mAttachment Load (0.2ms)[0m  [1mSELECT "attachments".* FROM "attachments" WHERE "attachments"."tourist_attraction_id" = $1 AND "attachments"."attachment_type_id" = 2[0m  [["tourist_attraction_id", 1]]
  Rendered tourist_attractions/_tourist_attraction.json.jbuilder (15.2ms)
  Rendered tours/attractions.json.jbuilder (22.4ms)
Completed 200 OK in 47ms (Views: 26.1ms | ActiveRecord: 7.0ms)
  [1m[36m (35.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (4.0ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to DeviseTokenAuthCreateUsers (20160906190409)
  [1m[35m (0.1ms)[0m  BEGIN
DEPRECATION WARNING: `#timestamps` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in change at /Users/yali/My_apps/TBB/db/migrate/20160906190409_devise_token_auth_create_users.rb:45)
  [1m[36m (29.3ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "provider" character varying DEFAULT 'email' NOT NULL, "uid" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying, "last_sign_in_ip" character varying, "confirmation_token" character varying, "confirmed_at" timestamp, "confirmation_sent_at" timestamp, "unconfirmed_email" character varying, "name" character varying, "nickname" character varying, "image" character varying, "email" character varying, "tokens" text, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (2.0ms)[0m  CREATE  INDEX  "index_users_on_email" ON "users"  ("email")
  [1m[36m (2.0ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_uid_and_provider" ON "users"  ("uid", "provider")[0m
  [1m[35m (2.0ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160906190409"]]
  [1m[35m (1.3ms)[0m  COMMIT
Migrating to CreateCountries (20160908183624)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (5.1ms)[0m  CREATE TABLE "countries" ("id" serial primary key, "name" character varying, "code" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908183624"]]
  [1m[35m (1.2ms)[0m  COMMIT
Migrating to CreateCities (20160908190656)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (5.9ms)[0m  CREATE TABLE "cities" ("id" serial primary key, "name" character varying, "country_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (2.6ms)[0m  [1mCREATE  INDEX  "index_cities_on_country_id" ON "cities"  ("country_id")[0m
  [1m[35m (11.2ms)[0m  ALTER TABLE "cities" ADD CONSTRAINT "fk_rails_996e05be41"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")

  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908190656"]]
  [1m[35m (1.4ms)[0m  COMMIT
Migrating to CreateTours (20160908191604)
  [1m[36m (0.9ms)[0m  [1mBEGIN[0m
  [1m[35m (6.3ms)[0m  CREATE TABLE "tours" ("id" serial primary key, "title" character varying, "description" text, "city_id" integer, "price" float, "user_id" integer, "estimated_time" character varying, "is_trans_included" boolean, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (1.9ms)[0m  [1mCREATE  INDEX  "index_tours_on_city_id" ON "tours"  ("city_id")[0m
  [1m[35m (2.0ms)[0m  CREATE  INDEX  "index_tours_on_user_id" ON "tours"  ("user_id")
  [1m[36m (1.3ms)[0m  [1mALTER TABLE "tours" ADD CONSTRAINT "fk_rails_12295a7603"
FOREIGN KEY ("city_id")
  REFERENCES "cities" ("id")
[0m
  [1m[35m (1.4ms)[0m  ALTER TABLE "tours" ADD CONSTRAINT "fk_rails_644aa67ccf"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")

  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908191604"]]
  [1m[35m (1.1ms)[0m  COMMIT
Migrating to CreateAttractions (20160908192636)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (5.6ms)[0m  CREATE TABLE "attractions" ("id" serial primary key, "title" character varying, "description" text, "trans_info" text, "address" text, "latitude" float, "longitude" float, "tour_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (1.9ms)[0m  [1mCREATE  INDEX  "index_attractions_on_tour_id" ON "attractions"  ("tour_id")[0m
  [1m[35m (2.4ms)[0m  ALTER TABLE "attractions" ADD CONSTRAINT "fk_rails_00ad253492"
FOREIGN KEY ("tour_id")
  REFERENCES "tours" ("id")

  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908192636"]]
  [1m[35m (1.3ms)[0m  COMMIT
Migrating to CreateAttractionDetails (20160908194945)
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (7.4ms)[0m  CREATE TABLE "attraction_details" ("id" serial primary key, "title" character varying, "description" text, "attraction_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (2.7ms)[0m  [1mCREATE  INDEX  "index_attraction_details_on_attraction_id" ON "attraction_details"  ("attraction_id")[0m
  [1m[35m (1.3ms)[0m  ALTER TABLE "attraction_details" ADD CONSTRAINT "fk_rails_d4d33a46b6"
FOREIGN KEY ("attraction_id")
  REFERENCES "attractions" ("id")

  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908194945"]]
  [1m[35m (1.5ms)[0m  COMMIT
Migrating to CreateAttachmentTypes (20160908195750)
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (6.8ms)[0m  CREATE TABLE "attachment_types" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908195750"]]
  [1m[35m (1.2ms)[0m  COMMIT
Migrating to CreateAttachments (20160908195840)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (6.4ms)[0m  CREATE TABLE "attachments" ("id" serial primary key, "url" text, "attraction_id" integer, "attraction_detail_id" integer, "attachment_type_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (2.0ms)[0m  [1mCREATE  INDEX  "index_attachments_on_attraction_id" ON "attachments"  ("attraction_id")[0m
  [1m[35m (2.3ms)[0m  CREATE  INDEX  "index_attachments_on_attraction_detail_id" ON "attachments"  ("attraction_detail_id")
  [1m[36m (2.1ms)[0m  [1mCREATE  INDEX  "index_attachments_on_attachment_type_id" ON "attachments"  ("attachment_type_id")[0m
  [1m[35m (1.2ms)[0m  ALTER TABLE "attachments" ADD CONSTRAINT "fk_rails_9bcf8e3e28"
FOREIGN KEY ("attraction_id")
  REFERENCES "attractions" ("id")

  [1m[36m (0.9ms)[0m  [1mALTER TABLE "attachments" ADD CONSTRAINT "fk_rails_5e066cddaa"
FOREIGN KEY ("attraction_detail_id")
  REFERENCES "attraction_details" ("id")
[0m
  [1m[35m (0.8ms)[0m  ALTER TABLE "attachments" ADD CONSTRAINT "fk_rails_54afe13733"
FOREIGN KEY ("attachment_type_id")
  REFERENCES "attachment_types" ("id")

  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908195840"]]
  [1m[35m (1.1ms)[0m  COMMIT
Migrating to CreateReviews (20160908200044)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (5.5ms)[0m  CREATE TABLE "reviews" ("id" serial primary key, "title" character varying, "content" text, "score" float, "tour_id" integer, "user_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (2.9ms)[0m  [1mCREATE  INDEX  "index_reviews_on_tour_id" ON "reviews"  ("tour_id")[0m
  [1m[35m (2.1ms)[0m  CREATE  INDEX  "index_reviews_on_user_id" ON "reviews"  ("user_id")
  [1m[36m (1.3ms)[0m  [1mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_cbf2a12b63"
FOREIGN KEY ("tour_id")
  REFERENCES "tours" ("id")
[0m
  [1m[35m (0.8ms)[0m  ALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_74a66bd6c5"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")

  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908200044"]]
  [1m[35m (1.7ms)[0m  COMMIT
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attachment_types'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attachments'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attraction_details'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attractions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'cities'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.4ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'countries'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'reviews'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'tours'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (2.1ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "attachment_types" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "image"], ["created_at", "2016-09-10 15:38:16.836426"], ["updated_at", "2016-09-10 15:38:16.836426"]]
  [1m[35m (2.0ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "attachment_types" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "audio"], ["created_at", "2016-09-10 15:38:16.844723"], ["updated_at", "2016-09-10 15:38:16.844723"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Syria"], ["code", "SY"], ["created_at", "2016-09-10 15:38:16.853532"], ["updated_at", "2016-09-10 15:38:16.853532"]]
  [1m[35m (1.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "Germany"], ["code", "DE"], ["created_at", "2016-09-10 15:38:16.857292"], ["updated_at", "2016-09-10 15:38:16.857292"]]
  [1m[36m (1.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "USA"], ["code", "US"], ["created_at", "2016-09-10 15:38:16.859893"], ["updated_at", "2016-09-10 15:38:16.859893"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "Damascus"], ["country_id", 1], ["created_at", "2016-09-10 15:38:16.881310"], ["updated_at", "2016-09-10 15:38:16.881310"]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Berlin"], ["country_id", 2], ["created_at", "2016-09-10 15:38:16.886354"], ["updated_at", "2016-09-10 15:38:16.886354"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "NY"], ["country_id", 3], ["created_at", "2016-09-10 15:38:16.889164"], ["updated_at", "2016-09-10 15:38:16.889164"]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (2.7ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."provider" = $1 AND "users"."email" IS NULL[0m  [["provider", "email"]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "attachment_types" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "image"], ["created_at", "2016-09-10 15:38:46.286191"], ["updated_at", "2016-09-10 15:38:46.286191"]]
  [1m[35m (2.0ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "attachment_types" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "audio"], ["created_at", "2016-09-10 15:38:46.291882"], ["updated_at", "2016-09-10 15:38:46.291882"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Syria"], ["code", "SY"], ["created_at", "2016-09-10 15:38:46.299331"], ["updated_at", "2016-09-10 15:38:46.299331"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "Germany"], ["code", "DE"], ["created_at", "2016-09-10 15:38:46.302290"], ["updated_at", "2016-09-10 15:38:46.302290"]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "USA"], ["code", "US"], ["created_at", "2016-09-10 15:38:46.304856"], ["updated_at", "2016-09-10 15:38:46.304856"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "Damascus"], ["country_id", 4], ["created_at", "2016-09-10 15:38:46.316596"], ["updated_at", "2016-09-10 15:38:46.316596"]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Berlin"], ["country_id", 5], ["created_at", "2016-09-10 15:38:46.319863"], ["updated_at", "2016-09-10 15:38:46.319863"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "NY"], ["country_id", 6], ["created_at", "2016-09-10 15:38:46.322627"], ["updated_at", "2016-09-10 15:38:46.322627"]]
  [1m[36m (1.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."provider" = $1 AND "users"."email" IS NULL[0m  [["provider", "email"]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."provider" = $1 AND "users"."email" IS NULL  [["provider", "email"]]
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "tours" ("title", "description", "price", "is_trans_included", "estimated_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["title", "Test Tour"], ["description", "This is test tour"], ["price", 10.0], ["is_trans_included", "t"], ["estimated_time", "10 Hours"], ["created_at", "2016-09-10 15:38:46.369218"], ["updated_at", "2016-09-10 15:38:46.369218"]]
  [1m[35m (1.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  INSERT INTO "attractions" ("title", "description", "address", "trans_info", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["title", "Test Attraction"], ["description", "So cool att"], ["address", "Genslerstraße 55, 13055 Berlin"], ["trans_info", "Take M13 for 10 stops"], ["created_at", "2016-09-10 15:38:46.391482"], ["updated_at", "2016-09-10 15:38:46.391482"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "attraction_details" ("title", "description", "attraction_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Test AD"], ["description", "Nice detail"], ["attraction_id", 1], ["created_at", "2016-09-10 15:38:46.403701"], ["updated_at", "2016-09-10 15:38:46.403701"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["attachment_type_id", 3], ["attraction_id", 1], ["url", "Image Url1 for att"], ["created_at", "2016-09-10 15:38:46.416270"], ["updated_at", "2016-09-10 15:38:46.416270"]]
  [1m[36m (1.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attachment_type_id", 3], ["attraction_id", 1], ["url", "Image Url2 for att"], ["created_at", "2016-09-10 15:38:46.422620"], ["updated_at", "2016-09-10 15:38:46.422620"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["attachment_type_id", 4], ["attraction_id", 1], ["url", "Audio Url1 for att"], ["created_at", "2016-09-10 15:38:46.426204"], ["updated_at", "2016-09-10 15:38:46.426204"]]
  [1m[36m (1.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attachment_type_id", 4], ["attraction_id", 1], ["url", "Audio Url2 for att"], ["created_at", "2016-09-10 15:38:46.430734"], ["updated_at", "2016-09-10 15:38:46.430734"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "attachment_types" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "image"], ["created_at", "2016-09-10 15:39:22.952751"], ["updated_at", "2016-09-10 15:39:22.952751"]]
  [1m[35m (1.9ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "attachment_types" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "audio"], ["created_at", "2016-09-10 15:39:22.958456"], ["updated_at", "2016-09-10 15:39:22.958456"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Syria"], ["code", "SY"], ["created_at", "2016-09-10 15:39:22.965729"], ["updated_at", "2016-09-10 15:39:22.965729"]]
  [1m[35m (1.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "Germany"], ["code", "DE"], ["created_at", "2016-09-10 15:39:22.968670"], ["updated_at", "2016-09-10 15:39:22.968670"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "USA"], ["code", "US"], ["created_at", "2016-09-10 15:39:22.971397"], ["updated_at", "2016-09-10 15:39:22.971397"]]
  [1m[35m (1.5ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "Damascus"], ["country_id", 7], ["created_at", "2016-09-10 15:39:22.983470"], ["updated_at", "2016-09-10 15:39:22.983470"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Berlin"], ["country_id", 8], ["created_at", "2016-09-10 15:39:22.986773"], ["updated_at", "2016-09-10 15:39:22.986773"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "NY"], ["country_id", 9], ["created_at", "2016-09-10 15:39:22.989655"], ["updated_at", "2016-09-10 15:39:22.989655"]]
  [1m[36m (1.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."provider" = $1 AND "users"."email" IS NULL[0m  [["provider", "email"]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."provider" = $1 AND "users"."email" IS NULL  [["provider", "email"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "tours" ("title", "description", "price", "is_trans_included", "estimated_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["title", "Test Tour"], ["description", "This is test tour"], ["price", 10.0], ["is_trans_included", "t"], ["estimated_time", "10 Hours"], ["created_at", "2016-09-10 15:39:23.035308"], ["updated_at", "2016-09-10 15:39:23.035308"]]
  [1m[35m (1.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "attractions" ("title", "description", "address", "trans_info", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["title", "Test Attraction"], ["description", "So cool att"], ["address", "Genslerstraße 55, 13055 Berlin"], ["trans_info", "Take M13 for 10 stops"], ["created_at", "2016-09-10 15:39:23.052437"], ["updated_at", "2016-09-10 15:39:23.052437"]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "attraction_details" ("title", "description", "attraction_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Test AD"], ["description", "Nice detail"], ["attraction_id", 2], ["created_at", "2016-09-10 15:39:23.062679"], ["updated_at", "2016-09-10 15:39:23.062679"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["attachment_type_id", 5], ["attraction_id", 2], ["url", "Image Url1 for att"], ["created_at", "2016-09-10 15:39:23.073263"], ["updated_at", "2016-09-10 15:39:23.073263"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attachment_type_id", 5], ["attraction_id", 2], ["url", "Image Url2 for att"], ["created_at", "2016-09-10 15:39:23.076790"], ["updated_at", "2016-09-10 15:39:23.076790"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["attachment_type_id", 6], ["attraction_id", 2], ["url", "Audio Url1 for att"], ["created_at", "2016-09-10 15:39:23.080397"], ["updated_at", "2016-09-10 15:39:23.080397"]]
  [1m[36m (1.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attachment_type_id", 6], ["attraction_id", 2], ["url", "Audio Url2 for att"], ["created_at", "2016-09-10 15:39:23.084995"], ["updated_at", "2016-09-10 15:39:23.084995"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "attachments" ("attachment_type_id", "attraction_detail_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["attachment_type_id", 5], ["attraction_detail_id", 2], ["url", "Image Url1 for attd"], ["created_at", "2016-09-10 15:39:23.089965"], ["updated_at", "2016-09-10 15:39:23.089965"]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "attachments" ("attachment_type_id", "attraction_detail_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attachment_type_id", 6], ["attraction_detail_id", 2], ["url", "Audio Url2 for attd"], ["created_at", "2016-09-10 15:39:23.093280"], ["updated_at", "2016-09-10 15:39:23.093280"]]
  [1m[35m (1.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."provider" = $1 AND "users"."email" IS NULL  [["provider", "email"]]
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "reviews" ("title", "content", "score", "tour_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Nice job"], ["content", "good"], ["score", 10.0], ["tour_id", 2], ["created_at", "2016-09-10 15:39:23.107602"], ["updated_at", "2016-09-10 15:39:23.107602"]]
  [1m[35m (1.2ms)[0m  COMMIT


Started GET "/tours/1/attractions" for ::1 at 2016-09-10 17:39:29 +0200
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ToursController#attractions as */*
  Parameters: {"id"=>"1"}
  [1m[35mTour Load (0.5ms)[0m  SELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered tours/attractions.json.jbuilder (6.1ms)
Completed 200 OK in 106ms (Views: 27.5ms | ActiveRecord: 6.3ms)


Started GET "/tours/" for ::1 at 2016-09-10 17:39:37 +0200
Processing by ToursController#index as */*
  [1m[36mTour Load (0.7ms)[0m  [1mSELECT "tours".* FROM "tours"[0m
  Rendered tours/_tour.json.jbuilder (9.8ms)
  Rendered tours/index.json.jbuilder (19.0ms)
Completed 500 Internal Server Error in 35ms (ActiveRecord: 0.7ms)

ActionView::Template::Error (undefined method `name' for nil:NilClass):
    1: json.extract! tour, :id, :title, :description, :price, :estimated_time, :is_trans_included, :created_at
    2: 
    3: json.city tour.city.name
    4: json.country tour.city.country.name
  app/views/tours/_tour.json.jbuilder:3:in `_app_views_tours__tour_json_jbuilder__221589044664572084_70200503207400'
  app/views/tours/index.json.jbuilder:1:in `_app_views_tours_index_json_jbuilder__1752020410622678615_70200503369940'
  app/controllers/tours_controller.rb:10:in `index'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (7.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (58.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (56.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (106.1ms)


Started GET "/tours" for ::1 at 2016-09-10 17:39:42 +0200
Processing by ToursController#index as */*
  [1m[35mTour Load (0.3ms)[0m  SELECT "tours".* FROM "tours"
  Rendered tours/_tour.json.jbuilder (3.2ms)
  Rendered tours/index.json.jbuilder (5.2ms)
Completed 500 Internal Server Error in 21ms (ActiveRecord: 0.3ms)

ActionView::Template::Error (undefined method `name' for nil:NilClass):
    1: json.extract! tour, :id, :title, :description, :price, :estimated_time, :is_trans_included, :created_at
    2: 
    3: json.city tour.city.name
    4: json.country tour.city.country.name
  app/views/tours/_tour.json.jbuilder:3:in `_app_views_tours__tour_json_jbuilder__221589044664572084_70200503207400'
  app/views/tours/index.json.jbuilder:1:in `_app_views_tours_index_json_jbuilder__1752020410622678615_70200503369940'
  app/controllers/tours_controller.rb:10:in `index'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (10.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (52.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (40.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (83.1ms)
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (2.0ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attachment_types'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (2.3ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attachments'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attraction_details'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attractions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.4ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'cities'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.7ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'countries'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.7ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'reviews'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'tours'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.7ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (2.4ms)[0m  INSERT INTO "attachment_types" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "image"], ["created_at", "2016-09-10 15:40:36.156545"], ["updated_at", "2016-09-10 15:40:36.156545"]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "attachment_types" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "audio"], ["created_at", "2016-09-10 15:40:36.169410"], ["updated_at", "2016-09-10 15:40:36.169410"]]
  [1m[35m (4.9ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (2.6ms)[0m  INSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "Syria"], ["code", "SY"], ["created_at", "2016-09-10 15:40:36.182742"], ["updated_at", "2016-09-10 15:40:36.182742"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Germany"], ["code", "DE"], ["created_at", "2016-09-10 15:40:36.188294"], ["updated_at", "2016-09-10 15:40:36.188294"]]
  [1m[35m (1.4ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "USA"], ["code", "US"], ["created_at", "2016-09-10 15:40:36.191572"], ["updated_at", "2016-09-10 15:40:36.191572"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (3.3ms)[0m  [1mINSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Damascus"], ["country_id", 10], ["created_at", "2016-09-10 15:40:36.204582"], ["updated_at", "2016-09-10 15:40:36.204582"]]
  [1m[35m (1.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "Berlin"], ["country_id", 11], ["created_at", "2016-09-10 15:40:36.210859"], ["updated_at", "2016-09-10 15:40:36.210859"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "NY"], ["country_id", 12], ["created_at", "2016-09-10 15:40:36.213797"], ["updated_at", "2016-09-10 15:40:36.213797"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."provider" = $1 AND "users"."email" IS NULL  [["provider", "email"]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."provider" = $1 AND "users"."email" IS NULL[0m  [["provider", "email"]]
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "tours" ("title", "description", "price", "is_trans_included", "estimated_time", "city_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["title", "Test Tour"], ["description", "This is test tour"], ["price", 10.0], ["is_trans_included", "t"], ["estimated_time", "10 Hours"], ["city_id", 10], ["created_at", "2016-09-10 15:40:36.258386"], ["updated_at", "2016-09-10 15:40:36.258386"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "attractions" ("title", "description", "address", "trans_info", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Test Attraction"], ["description", "So cool att"], ["address", "Genslerstraße 55, 13055 Berlin"], ["trans_info", "Take M13 for 10 stops"], ["created_at", "2016-09-10 15:40:36.282449"], ["updated_at", "2016-09-10 15:40:36.282449"]]
  [1m[35m (1.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (4.0ms)[0m  INSERT INTO "attraction_details" ("title", "description", "attraction_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["title", "Test AD"], ["description", "Nice detail"], ["attraction_id", 3], ["created_at", "2016-09-10 15:40:36.294963"], ["updated_at", "2016-09-10 15:40:36.294963"]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (11.1ms)[0m  [1mINSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attachment_type_id", 7], ["attraction_id", 3], ["url", "Image Url1 for att"], ["created_at", "2016-09-10 15:40:36.311417"], ["updated_at", "2016-09-10 15:40:36.311417"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["attachment_type_id", 7], ["attraction_id", 3], ["url", "Image Url2 for att"], ["created_at", "2016-09-10 15:40:36.325562"], ["updated_at", "2016-09-10 15:40:36.325562"]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attachment_type_id", 8], ["attraction_id", 3], ["url", "Audio Url1 for att"], ["created_at", "2016-09-10 15:40:36.328511"], ["updated_at", "2016-09-10 15:40:36.328511"]]
  [1m[35m (1.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["attachment_type_id", 8], ["attraction_id", 3], ["url", "Audio Url2 for att"], ["created_at", "2016-09-10 15:40:36.331610"], ["updated_at", "2016-09-10 15:40:36.331610"]]
  [1m[36m (1.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "attachments" ("attachment_type_id", "attraction_detail_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attachment_type_id", 7], ["attraction_detail_id", 3], ["url", "Image Url1 for attd"], ["created_at", "2016-09-10 15:40:36.335542"], ["updated_at", "2016-09-10 15:40:36.335542"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "attachments" ("attachment_type_id", "attraction_detail_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["attachment_type_id", 8], ["attraction_detail_id", 3], ["url", "Audio Url2 for attd"], ["created_at", "2016-09-10 15:40:36.340196"], ["updated_at", "2016-09-10 15:40:36.340196"]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."provider" = $1 AND "users"."email" IS NULL[0m  [["provider", "email"]]
  [1m[35mSQL (4.4ms)[0m  INSERT INTO "reviews" ("title", "content", "score", "tour_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["title", "Nice job"], ["content", "good"], ["score", 10.0], ["tour_id", 3], ["created_at", "2016-09-10 15:40:36.352767"], ["updated_at", "2016-09-10 15:40:36.352767"]]
  [1m[36m (1.4ms)[0m  [1mCOMMIT[0m
  [1m[36m (34.3ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (2.4ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to DeviseTokenAuthCreateUsers (20160906190409)
  [1m[35m (0.1ms)[0m  BEGIN
DEPRECATION WARNING: `#timestamps` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in change at /Users/yali/My_apps/TBB/db/migrate/20160906190409_devise_token_auth_create_users.rb:45)
  [1m[36m (24.6ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "provider" character varying DEFAULT 'email' NOT NULL, "uid" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying, "last_sign_in_ip" character varying, "confirmation_token" character varying, "confirmed_at" timestamp, "confirmation_sent_at" timestamp, "unconfirmed_email" character varying, "name" character varying, "nickname" character varying, "image" character varying, "email" character varying, "tokens" text, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (2.0ms)[0m  CREATE  INDEX  "index_users_on_email" ON "users"  ("email")
  [1m[36m (1.9ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_uid_and_provider" ON "users"  ("uid", "provider")[0m
  [1m[35m (2.0ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160906190409"]]
  [1m[35m (1.2ms)[0m  COMMIT
Migrating to CreateCountries (20160908183624)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (5.7ms)[0m  CREATE TABLE "countries" ("id" serial primary key, "name" character varying, "code" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908183624"]]
  [1m[35m (1.3ms)[0m  COMMIT
Migrating to CreateCities (20160908190656)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (5.8ms)[0m  CREATE TABLE "cities" ("id" serial primary key, "name" character varying, "country_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (2.1ms)[0m  [1mCREATE  INDEX  "index_cities_on_country_id" ON "cities"  ("country_id")[0m
  [1m[35m (8.4ms)[0m  ALTER TABLE "cities" ADD CONSTRAINT "fk_rails_996e05be41"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")

  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908190656"]]
  [1m[35m (1.1ms)[0m  COMMIT
Migrating to CreateTours (20160908191604)
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35m (6.5ms)[0m  CREATE TABLE "tours" ("id" serial primary key, "title" character varying, "description" text, "city_id" integer, "price" float, "user_id" integer, "estimated_time" character varying, "is_trans_included" boolean, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (1.8ms)[0m  [1mCREATE  INDEX  "index_tours_on_city_id" ON "tours"  ("city_id")[0m
  [1m[35m (2.1ms)[0m  CREATE  INDEX  "index_tours_on_user_id" ON "tours"  ("user_id")
  [1m[36m (1.3ms)[0m  [1mALTER TABLE "tours" ADD CONSTRAINT "fk_rails_12295a7603"
FOREIGN KEY ("city_id")
  REFERENCES "cities" ("id")
[0m
  [1m[35m (1.4ms)[0m  ALTER TABLE "tours" ADD CONSTRAINT "fk_rails_644aa67ccf"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")

  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908191604"]]
  [1m[35m (1.1ms)[0m  COMMIT
Migrating to CreateAttractions (20160908192636)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (5.2ms)[0m  CREATE TABLE "attractions" ("id" serial primary key, "title" character varying, "description" text, "trans_info" text, "address" text, "latitude" float, "longitude" float, "tour_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (1.8ms)[0m  [1mCREATE  INDEX  "index_attractions_on_tour_id" ON "attractions"  ("tour_id")[0m
  [1m[35m (1.4ms)[0m  ALTER TABLE "attractions" ADD CONSTRAINT "fk_rails_00ad253492"
FOREIGN KEY ("tour_id")
  REFERENCES "tours" ("id")

  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908192636"]]
  [1m[35m (1.1ms)[0m  COMMIT
Migrating to CreateAttractionDetails (20160908194945)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (6.3ms)[0m  CREATE TABLE "attraction_details" ("id" serial primary key, "title" character varying, "description" text, "attraction_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (2.4ms)[0m  [1mCREATE  INDEX  "index_attraction_details_on_attraction_id" ON "attraction_details"  ("attraction_id")[0m
  [1m[35m (1.1ms)[0m  ALTER TABLE "attraction_details" ADD CONSTRAINT "fk_rails_d4d33a46b6"
FOREIGN KEY ("attraction_id")
  REFERENCES "attractions" ("id")

  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908194945"]]
  [1m[35m (1.4ms)[0m  COMMIT
Migrating to CreateAttachmentTypes (20160908195750)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (5.7ms)[0m  CREATE TABLE "attachment_types" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908195750"]]
  [1m[35m (1.2ms)[0m  COMMIT
Migrating to CreateAttachments (20160908195840)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (6.4ms)[0m  CREATE TABLE "attachments" ("id" serial primary key, "url" text, "attraction_id" integer, "attraction_detail_id" integer, "attachment_type_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (2.0ms)[0m  [1mCREATE  INDEX  "index_attachments_on_attraction_id" ON "attachments"  ("attraction_id")[0m
  [1m[35m (1.8ms)[0m  CREATE  INDEX  "index_attachments_on_attraction_detail_id" ON "attachments"  ("attraction_detail_id")
  [1m[36m (1.9ms)[0m  [1mCREATE  INDEX  "index_attachments_on_attachment_type_id" ON "attachments"  ("attachment_type_id")[0m
  [1m[35m (1.6ms)[0m  ALTER TABLE "attachments" ADD CONSTRAINT "fk_rails_9bcf8e3e28"
FOREIGN KEY ("attraction_id")
  REFERENCES "attractions" ("id")

  [1m[36m (1.2ms)[0m  [1mALTER TABLE "attachments" ADD CONSTRAINT "fk_rails_5e066cddaa"
FOREIGN KEY ("attraction_detail_id")
  REFERENCES "attraction_details" ("id")
[0m
  [1m[35m (0.9ms)[0m  ALTER TABLE "attachments" ADD CONSTRAINT "fk_rails_54afe13733"
FOREIGN KEY ("attachment_type_id")
  REFERENCES "attachment_types" ("id")

  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908195840"]]
  [1m[35m (1.1ms)[0m  COMMIT
Migrating to CreateReviews (20160908200044)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (8.1ms)[0m  CREATE TABLE "reviews" ("id" serial primary key, "title" character varying, "content" text, "score" float, "tour_id" integer, "user_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (2.1ms)[0m  [1mCREATE  INDEX  "index_reviews_on_tour_id" ON "reviews"  ("tour_id")[0m
  [1m[35m (1.9ms)[0m  CREATE  INDEX  "index_reviews_on_user_id" ON "reviews"  ("user_id")
  [1m[36m (1.1ms)[0m  [1mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_cbf2a12b63"
FOREIGN KEY ("tour_id")
  REFERENCES "tours" ("id")
[0m
  [1m[35m (0.8ms)[0m  ALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_74a66bd6c5"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")

  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908200044"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.9ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attachment_types'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attachments'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attraction_details'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attractions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'cities'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'countries'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (2.9ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'reviews'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (3.0ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'tours'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.9ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "attachment_types" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "image"], ["created_at", "2016-09-10 15:40:46.154337"], ["updated_at", "2016-09-10 15:40:46.154337"]]
  [1m[35m (6.0ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "attachment_types" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "audio"], ["created_at", "2016-09-10 15:40:46.162324"], ["updated_at", "2016-09-10 15:40:46.162324"]]
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Syria"], ["code", "SY"], ["created_at", "2016-09-10 15:40:46.177105"], ["updated_at", "2016-09-10 15:40:46.177105"]]
  [1m[35m (1.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "Germany"], ["code", "DE"], ["created_at", "2016-09-10 15:40:46.180435"], ["updated_at", "2016-09-10 15:40:46.180435"]]
  [1m[36m (1.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "USA"], ["code", "US"], ["created_at", "2016-09-10 15:40:46.183237"], ["updated_at", "2016-09-10 15:40:46.183237"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "Damascus"], ["country_id", 1], ["created_at", "2016-09-10 15:40:46.197177"], ["updated_at", "2016-09-10 15:40:46.197177"]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Berlin"], ["country_id", 2], ["created_at", "2016-09-10 15:40:46.200616"], ["updated_at", "2016-09-10 15:40:46.200616"]]
  [1m[35m (1.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "NY"], ["country_id", 3], ["created_at", "2016-09-10 15:40:46.203375"], ["updated_at", "2016-09-10 15:40:46.203375"]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."provider" = $1 AND "users"."email" IS NULL[0m  [["provider", "email"]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."provider" = $1 AND "users"."email" IS NULL  [["provider", "email"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "tours" ("title", "description", "price", "is_trans_included", "estimated_time", "city_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "Test Tour"], ["description", "This is test tour"], ["price", 10.0], ["is_trans_included", "t"], ["estimated_time", "10 Hours"], ["city_id", 1], ["created_at", "2016-09-10 15:40:46.251607"], ["updated_at", "2016-09-10 15:40:46.251607"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "attractions" ("title", "description", "address", "trans_info", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["title", "Test Attraction"], ["description", "So cool att"], ["address", "Genslerstraße 55, 13055 Berlin"], ["trans_info", "Take M13 for 10 stops"], ["created_at", "2016-09-10 15:40:46.276725"], ["updated_at", "2016-09-10 15:40:46.276725"]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "attraction_details" ("title", "description", "attraction_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Test AD"], ["description", "Nice detail"], ["attraction_id", 1], ["created_at", "2016-09-10 15:40:46.287981"], ["updated_at", "2016-09-10 15:40:46.287981"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["attachment_type_id", 1], ["attraction_id", 1], ["url", "Image Url1 for att"], ["created_at", "2016-09-10 15:40:46.299831"], ["updated_at", "2016-09-10 15:40:46.299831"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attachment_type_id", 1], ["attraction_id", 1], ["url", "Image Url2 for att"], ["created_at", "2016-09-10 15:40:46.304403"], ["updated_at", "2016-09-10 15:40:46.304403"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["attachment_type_id", 2], ["attraction_id", 1], ["url", "Audio Url1 for att"], ["created_at", "2016-09-10 15:40:46.307549"], ["updated_at", "2016-09-10 15:40:46.307549"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attachment_type_id", 2], ["attraction_id", 1], ["url", "Audio Url2 for att"], ["created_at", "2016-09-10 15:40:46.310810"], ["updated_at", "2016-09-10 15:40:46.310810"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "attachments" ("attachment_type_id", "attraction_detail_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["attachment_type_id", 1], ["attraction_detail_id", 1], ["url", "Image Url1 for attd"], ["created_at", "2016-09-10 15:40:46.314776"], ["updated_at", "2016-09-10 15:40:46.314776"]]
  [1m[36m (1.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "attachments" ("attachment_type_id", "attraction_detail_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attachment_type_id", 2], ["attraction_detail_id", 1], ["url", "Audio Url2 for attd"], ["created_at", "2016-09-10 15:40:46.318399"], ["updated_at", "2016-09-10 15:40:46.318399"]]
  [1m[35m (1.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."provider" = $1 AND "users"."email" IS NULL  [["provider", "email"]]
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "reviews" ("title", "content", "score", "tour_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Nice job"], ["content", "good"], ["score", 10.0], ["tour_id", 1], ["created_at", "2016-09-10 15:40:46.330959"], ["updated_at", "2016-09-10 15:40:46.330959"]]
  [1m[35m (1.3ms)[0m  COMMIT


Started GET "/tours" for ::1 at 2016-09-10 17:40:56 +0200
  [1m[36mActiveRecord::SchemaMigration Load (2.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ToursController#index as */*
  [1m[35mTour Load (7.4ms)[0m  SELECT "tours".* FROM "tours"
  [1m[36mCity Load (4.6ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCountry Load (3.2ms)[0m  SELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered tours/_tour.json.jbuilder (37.8ms)
  Rendered tours/index.json.jbuilder (62.3ms)
Completed 200 OK in 87ms (Views: 51.8ms | ActiveRecord: 22.4ms)


Started GET "/tours/1" for ::1 at 2016-09-10 17:41:07 +0200
Processing by ToursController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mTour Load (0.4ms)[0m  [1mSELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCity Load (0.2ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCountry Load (0.2ms)[0m  [1mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered tours/_tour.json.jbuilder (2.2ms)
  Rendered tours/show.json.jbuilder (3.3ms)
Completed 200 OK in 27ms (Views: 18.1ms | ActiveRecord: 0.8ms)


Started GET "/tours/1/attractions" for ::1 at 2016-09-10 17:41:12 +0200
Processing by ToursController#attractions as */*
  Parameters: {"id"=>"1"}
  [1m[35mTour Load (0.3ms)[0m  SELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered tours/attractions.json.jbuilder (0.3ms)
Completed 200 OK in 46ms (Views: 8.8ms | ActiveRecord: 7.9ms)
  [1m[36m (38.3ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (2.5ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to DeviseTokenAuthCreateUsers (20160906190409)
  [1m[35m (0.1ms)[0m  BEGIN
DEPRECATION WARNING: `#timestamps` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in change at /Users/yali/My_apps/TBB/db/migrate/20160906190409_devise_token_auth_create_users.rb:45)
  [1m[36m (24.1ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "provider" character varying DEFAULT 'email' NOT NULL, "uid" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying, "last_sign_in_ip" character varying, "confirmation_token" character varying, "confirmed_at" timestamp, "confirmation_sent_at" timestamp, "unconfirmed_email" character varying, "name" character varying, "nickname" character varying, "image" character varying, "email" character varying, "tokens" text, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (1.9ms)[0m  CREATE  INDEX  "index_users_on_email" ON "users"  ("email")
  [1m[36m (1.9ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_uid_and_provider" ON "users"  ("uid", "provider")[0m
  [1m[35m (2.2ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160906190409"]]
  [1m[35m (1.4ms)[0m  COMMIT
Migrating to CreateCountries (20160908183624)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (8.8ms)[0m  CREATE TABLE "countries" ("id" serial primary key, "name" character varying, "code" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908183624"]]
  [1m[35m (1.3ms)[0m  COMMIT
Migrating to CreateCities (20160908190656)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (5.1ms)[0m  CREATE TABLE "cities" ("id" serial primary key, "name" character varying, "country_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (1.9ms)[0m  [1mCREATE  INDEX  "index_cities_on_country_id" ON "cities"  ("country_id")[0m
  [1m[35m (8.4ms)[0m  ALTER TABLE "cities" ADD CONSTRAINT "fk_rails_996e05be41"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")

  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908190656"]]
  [1m[35m (1.2ms)[0m  COMMIT
Migrating to CreateTours (20160908191604)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (5.1ms)[0m  CREATE TABLE "tours" ("id" serial primary key, "title" character varying, "description" text, "city_id" integer, "price" float, "user_id" integer, "estimated_time" character varying, "is_trans_included" boolean, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (2.2ms)[0m  [1mCREATE  INDEX  "index_tours_on_city_id" ON "tours"  ("city_id")[0m
  [1m[35m (2.1ms)[0m  CREATE  INDEX  "index_tours_on_user_id" ON "tours"  ("user_id")
  [1m[36m (1.3ms)[0m  [1mALTER TABLE "tours" ADD CONSTRAINT "fk_rails_12295a7603"
FOREIGN KEY ("city_id")
  REFERENCES "cities" ("id")
[0m
  [1m[35m (1.8ms)[0m  ALTER TABLE "tours" ADD CONSTRAINT "fk_rails_644aa67ccf"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")

  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908191604"]]
  [1m[35m (1.2ms)[0m  COMMIT
Migrating to CreateAttractions (20160908192636)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (5.0ms)[0m  CREATE TABLE "attractions" ("id" serial primary key, "title" character varying, "description" text, "trans_info" text, "address" text, "latitude" float, "longitude" float, "tour_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (1.7ms)[0m  [1mCREATE  INDEX  "index_attractions_on_tour_id" ON "attractions"  ("tour_id")[0m
  [1m[35m (1.4ms)[0m  ALTER TABLE "attractions" ADD CONSTRAINT "fk_rails_00ad253492"
FOREIGN KEY ("tour_id")
  REFERENCES "tours" ("id")

  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908192636"]]
  [1m[35m (1.4ms)[0m  COMMIT
Migrating to CreateAttractionDetails (20160908194945)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (5.3ms)[0m  CREATE TABLE "attraction_details" ("id" serial primary key, "title" character varying, "description" text, "attraction_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (1.8ms)[0m  [1mCREATE  INDEX  "index_attraction_details_on_attraction_id" ON "attraction_details"  ("attraction_id")[0m
  [1m[35m (1.2ms)[0m  ALTER TABLE "attraction_details" ADD CONSTRAINT "fk_rails_d4d33a46b6"
FOREIGN KEY ("attraction_id")
  REFERENCES "attractions" ("id")

  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908194945"]]
  [1m[35m (1.3ms)[0m  COMMIT
Migrating to CreateAttachmentTypes (20160908195750)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (6.1ms)[0m  CREATE TABLE "attachment_types" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908195750"]]
  [1m[35m (1.3ms)[0m  COMMIT
Migrating to CreateAttachments (20160908195840)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (6.4ms)[0m  CREATE TABLE "attachments" ("id" serial primary key, "url" text, "attraction_id" integer, "attraction_detail_id" integer, "attachment_type_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (2.2ms)[0m  [1mCREATE  INDEX  "index_attachments_on_attraction_id" ON "attachments"  ("attraction_id")[0m
  [1m[35m (2.0ms)[0m  CREATE  INDEX  "index_attachments_on_attraction_detail_id" ON "attachments"  ("attraction_detail_id")
  [1m[36m (1.8ms)[0m  [1mCREATE  INDEX  "index_attachments_on_attachment_type_id" ON "attachments"  ("attachment_type_id")[0m
  [1m[35m (1.2ms)[0m  ALTER TABLE "attachments" ADD CONSTRAINT "fk_rails_9bcf8e3e28"
FOREIGN KEY ("attraction_id")
  REFERENCES "attractions" ("id")

  [1m[36m (0.9ms)[0m  [1mALTER TABLE "attachments" ADD CONSTRAINT "fk_rails_5e066cddaa"
FOREIGN KEY ("attraction_detail_id")
  REFERENCES "attraction_details" ("id")
[0m
  [1m[35m (0.9ms)[0m  ALTER TABLE "attachments" ADD CONSTRAINT "fk_rails_54afe13733"
FOREIGN KEY ("attachment_type_id")
  REFERENCES "attachment_types" ("id")

  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908195840"]]
  [1m[35m (1.2ms)[0m  COMMIT
Migrating to CreateReviews (20160908200044)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (5.3ms)[0m  CREATE TABLE "reviews" ("id" serial primary key, "title" character varying, "content" text, "score" float, "tour_id" integer, "user_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (1.8ms)[0m  [1mCREATE  INDEX  "index_reviews_on_tour_id" ON "reviews"  ("tour_id")[0m
  [1m[35m (1.9ms)[0m  CREATE  INDEX  "index_reviews_on_user_id" ON "reviews"  ("user_id")
  [1m[36m (1.2ms)[0m  [1mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_cbf2a12b63"
FOREIGN KEY ("tour_id")
  REFERENCES "tours" ("id")
[0m
  [1m[35m (0.9ms)[0m  ALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_74a66bd6c5"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")

  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908200044"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.1ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attachment_types'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attachments'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attraction_details'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attractions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'cities'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'countries'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'reviews'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.4ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'tours'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "attachment_types" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "image"], ["created_at", "2016-09-10 15:41:41.142536"], ["updated_at", "2016-09-10 15:41:41.142536"]]
  [1m[35m (5.9ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "attachment_types" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "audio"], ["created_at", "2016-09-10 15:41:41.150366"], ["updated_at", "2016-09-10 15:41:41.150366"]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Syria"], ["code", "SY"], ["created_at", "2016-09-10 15:41:41.165216"], ["updated_at", "2016-09-10 15:41:41.165216"]]
  [1m[35m (1.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "Germany"], ["code", "DE"], ["created_at", "2016-09-10 15:41:41.168289"], ["updated_at", "2016-09-10 15:41:41.168289"]]
  [1m[36m (1.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "USA"], ["code", "US"], ["created_at", "2016-09-10 15:41:41.171049"], ["updated_at", "2016-09-10 15:41:41.171049"]]
  [1m[35m (1.0ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "Damascus"], ["country_id", 1], ["created_at", "2016-09-10 15:41:41.183269"], ["updated_at", "2016-09-10 15:41:41.183269"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Berlin"], ["country_id", 2], ["created_at", "2016-09-10 15:41:41.186988"], ["updated_at", "2016-09-10 15:41:41.186988"]]
  [1m[35m (1.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "NY"], ["country_id", 3], ["created_at", "2016-09-10 15:41:41.191056"], ["updated_at", "2016-09-10 15:41:41.191056"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."provider" = $1 AND "users"."email" IS NULL[0m  [["provider", "email"]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."provider" = $1 AND "users"."email" IS NULL  [["provider", "email"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "tours" ("title", "description", "price", "is_trans_included", "estimated_time", "city_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "Test Tour"], ["description", "This is test tour"], ["price", 10.0], ["is_trans_included", "t"], ["estimated_time", "10 Hours"], ["city_id", 1], ["created_at", "2016-09-10 15:41:41.238106"], ["updated_at", "2016-09-10 15:41:41.238106"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "attractions" ("title", "description", "address", "trans_info", "tour_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["title", "Test Attraction"], ["description", "So cool att"], ["address", "Genslerstraße 55, 13055 Berlin"], ["trans_info", "Take M13 for 10 stops"], ["tour_id", 1], ["created_at", "2016-09-10 15:41:41.264190"], ["updated_at", "2016-09-10 15:41:41.264190"]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "attraction_details" ("title", "description", "attraction_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Test AD"], ["description", "Nice detail"], ["attraction_id", 1], ["created_at", "2016-09-10 15:41:41.277358"], ["updated_at", "2016-09-10 15:41:41.277358"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["attachment_type_id", 1], ["attraction_id", 1], ["url", "Image Url1 for att"], ["created_at", "2016-09-10 15:41:41.289305"], ["updated_at", "2016-09-10 15:41:41.289305"]]
  [1m[36m (1.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attachment_type_id", 1], ["attraction_id", 1], ["url", "Image Url2 for att"], ["created_at", "2016-09-10 15:41:41.293574"], ["updated_at", "2016-09-10 15:41:41.293574"]]
  [1m[35m (1.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["attachment_type_id", 2], ["attraction_id", 1], ["url", "Audio Url1 for att"], ["created_at", "2016-09-10 15:41:41.296591"], ["updated_at", "2016-09-10 15:41:41.296591"]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attachment_type_id", 2], ["attraction_id", 1], ["url", "Audio Url2 for att"], ["created_at", "2016-09-10 15:41:41.299397"], ["updated_at", "2016-09-10 15:41:41.299397"]]
  [1m[35m (1.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "attachments" ("attachment_type_id", "attraction_detail_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["attachment_type_id", 1], ["attraction_detail_id", 1], ["url", "Image Url1 for attd"], ["created_at", "2016-09-10 15:41:41.303100"], ["updated_at", "2016-09-10 15:41:41.303100"]]
  [1m[36m (1.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "attachments" ("attachment_type_id", "attraction_detail_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attachment_type_id", 2], ["attraction_detail_id", 1], ["url", "Audio Url2 for attd"], ["created_at", "2016-09-10 15:41:41.306617"], ["updated_at", "2016-09-10 15:41:41.306617"]]
  [1m[35m (1.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."provider" = $1 AND "users"."email" IS NULL  [["provider", "email"]]
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "reviews" ("title", "content", "score", "tour_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Nice job"], ["content", "good"], ["score", 10.0], ["tour_id", 1], ["created_at", "2016-09-10 15:41:41.319265"], ["updated_at", "2016-09-10 15:41:41.319265"]]
  [1m[35m (1.1ms)[0m  COMMIT


Started GET "/tours/1/attractions" for ::1 at 2016-09-10 17:42:22 +0200
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ToursController#attractions as */*
  Parameters: {"id"=>"1"}
  [1m[35mTour Load (2.0ms)[0m  SELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered tours/attractions.json.jbuilder (1.9ms)
Completed 200 OK in 68ms (Views: 14.8ms | ActiveRecord: 6.7ms)
  [1m[36m (33.5ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (2.7ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to DeviseTokenAuthCreateUsers (20160906190409)
  [1m[35m (0.1ms)[0m  BEGIN
DEPRECATION WARNING: `#timestamps` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in change at /Users/yali/My_apps/TBB/db/migrate/20160906190409_devise_token_auth_create_users.rb:45)
  [1m[36m (25.3ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "provider" character varying DEFAULT 'email' NOT NULL, "uid" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying, "last_sign_in_ip" character varying, "confirmation_token" character varying, "confirmed_at" timestamp, "confirmation_sent_at" timestamp, "unconfirmed_email" character varying, "name" character varying, "nickname" character varying, "image" character varying, "email" character varying, "tokens" text, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (2.0ms)[0m  CREATE  INDEX  "index_users_on_email" ON "users"  ("email")
  [1m[36m (2.2ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_uid_and_provider" ON "users"  ("uid", "provider")[0m
  [1m[35m (2.0ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160906190409"]]
  [1m[35m (1.4ms)[0m  COMMIT
Migrating to CreateCountries (20160908183624)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (8.0ms)[0m  CREATE TABLE "countries" ("id" serial primary key, "name" character varying, "code" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908183624"]]
  [1m[35m (1.4ms)[0m  COMMIT
Migrating to CreateCities (20160908190656)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (5.8ms)[0m  CREATE TABLE "cities" ("id" serial primary key, "name" character varying, "country_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (2.1ms)[0m  [1mCREATE  INDEX  "index_cities_on_country_id" ON "cities"  ("country_id")[0m
  [1m[35m (8.7ms)[0m  ALTER TABLE "cities" ADD CONSTRAINT "fk_rails_996e05be41"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")

  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908190656"]]
  [1m[35m (1.2ms)[0m  COMMIT
Migrating to CreateTours (20160908191604)
  [1m[36m (0.8ms)[0m  [1mBEGIN[0m
  [1m[35m (7.1ms)[0m  CREATE TABLE "tours" ("id" serial primary key, "title" character varying, "description" text, "city_id" integer, "price" float, "user_id" integer, "estimated_time" character varying, "is_trans_included" boolean, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (2.1ms)[0m  [1mCREATE  INDEX  "index_tours_on_city_id" ON "tours"  ("city_id")[0m
  [1m[35m (2.1ms)[0m  CREATE  INDEX  "index_tours_on_user_id" ON "tours"  ("user_id")
  [1m[36m (1.3ms)[0m  [1mALTER TABLE "tours" ADD CONSTRAINT "fk_rails_12295a7603"
FOREIGN KEY ("city_id")
  REFERENCES "cities" ("id")
[0m
  [1m[35m (1.4ms)[0m  ALTER TABLE "tours" ADD CONSTRAINT "fk_rails_644aa67ccf"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")

  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908191604"]]
  [1m[35m (1.2ms)[0m  COMMIT
Migrating to CreateAttractions (20160908192636)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (5.4ms)[0m  CREATE TABLE "attractions" ("id" serial primary key, "title" character varying, "description" text, "trans_info" text, "address" text, "latitude" float, "longitude" float, "tour_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (2.6ms)[0m  [1mCREATE  INDEX  "index_attractions_on_tour_id" ON "attractions"  ("tour_id")[0m
  [1m[35m (2.0ms)[0m  ALTER TABLE "attractions" ADD CONSTRAINT "fk_rails_00ad253492"
FOREIGN KEY ("tour_id")
  REFERENCES "tours" ("id")

  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908192636"]]
  [1m[35m (1.3ms)[0m  COMMIT
Migrating to CreateAttractionDetails (20160908194945)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (6.0ms)[0m  CREATE TABLE "attraction_details" ("id" serial primary key, "title" character varying, "description" text, "attraction_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (2.0ms)[0m  [1mCREATE  INDEX  "index_attraction_details_on_attraction_id" ON "attraction_details"  ("attraction_id")[0m
  [1m[35m (1.2ms)[0m  ALTER TABLE "attraction_details" ADD CONSTRAINT "fk_rails_d4d33a46b6"
FOREIGN KEY ("attraction_id")
  REFERENCES "attractions" ("id")

  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908194945"]]
  [1m[35m (1.3ms)[0m  COMMIT
Migrating to CreateAttachmentTypes (20160908195750)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (7.8ms)[0m  CREATE TABLE "attachment_types" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908195750"]]
  [1m[35m (1.3ms)[0m  COMMIT
Migrating to CreateAttachments (20160908195840)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (5.5ms)[0m  CREATE TABLE "attachments" ("id" serial primary key, "url" text, "attraction_id" integer, "attraction_detail_id" integer, "attachment_type_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (2.0ms)[0m  [1mCREATE  INDEX  "index_attachments_on_attraction_id" ON "attachments"  ("attraction_id")[0m
  [1m[35m (2.4ms)[0m  CREATE  INDEX  "index_attachments_on_attraction_detail_id" ON "attachments"  ("attraction_detail_id")
  [1m[36m (2.0ms)[0m  [1mCREATE  INDEX  "index_attachments_on_attachment_type_id" ON "attachments"  ("attachment_type_id")[0m
  [1m[35m (1.2ms)[0m  ALTER TABLE "attachments" ADD CONSTRAINT "fk_rails_9bcf8e3e28"
FOREIGN KEY ("attraction_id")
  REFERENCES "attractions" ("id")

  [1m[36m (1.0ms)[0m  [1mALTER TABLE "attachments" ADD CONSTRAINT "fk_rails_5e066cddaa"
FOREIGN KEY ("attraction_detail_id")
  REFERENCES "attraction_details" ("id")
[0m
  [1m[35m (0.9ms)[0m  ALTER TABLE "attachments" ADD CONSTRAINT "fk_rails_54afe13733"
FOREIGN KEY ("attachment_type_id")
  REFERENCES "attachment_types" ("id")

  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908195840"]]
  [1m[35m (1.4ms)[0m  COMMIT
Migrating to CreateReviews (20160908200044)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (6.6ms)[0m  CREATE TABLE "reviews" ("id" serial primary key, "title" character varying, "content" text, "score" float, "tour_id" integer, "user_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (2.0ms)[0m  [1mCREATE  INDEX  "index_reviews_on_tour_id" ON "reviews"  ("tour_id")[0m
  [1m[35m (3.6ms)[0m  CREATE  INDEX  "index_reviews_on_user_id" ON "reviews"  ("user_id")
  [1m[36m (1.2ms)[0m  [1mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_cbf2a12b63"
FOREIGN KEY ("tour_id")
  REFERENCES "tours" ("id")
[0m
  [1m[35m (0.8ms)[0m  ALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_74a66bd6c5"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")

  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20160908200044"]]
  [1m[35m (1.7ms)[0m  COMMIT
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attachment_types'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (3.0ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attachments'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attraction_details'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attractions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'cities'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.4ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'countries'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'reviews'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'tours'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "attachment_types" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "image"], ["created_at", "2016-09-10 15:42:31.924835"], ["updated_at", "2016-09-10 15:42:31.924835"]]
  [1m[35m (6.0ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "attachment_types" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "audio"], ["created_at", "2016-09-10 15:42:31.933217"], ["updated_at", "2016-09-10 15:42:31.933217"]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Syria"], ["code", "SY"], ["created_at", "2016-09-10 15:42:31.948482"], ["updated_at", "2016-09-10 15:42:31.948482"]]
  [1m[35m (1.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "Germany"], ["code", "DE"], ["created_at", "2016-09-10 15:42:31.951610"], ["updated_at", "2016-09-10 15:42:31.951610"]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "countries" ("name", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "USA"], ["code", "US"], ["created_at", "2016-09-10 15:42:31.954258"], ["updated_at", "2016-09-10 15:42:31.954258"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "Damascus"], ["country_id", 1], ["created_at", "2016-09-10 15:42:31.969126"], ["updated_at", "2016-09-10 15:42:31.969126"]]
  [1m[36m (1.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Berlin"], ["country_id", 2], ["created_at", "2016-09-10 15:42:31.973155"], ["updated_at", "2016-09-10 15:42:31.973155"]]
  [1m[35m (1.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "cities" ("name", "country_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "NY"], ["country_id", 3], ["created_at", "2016-09-10 15:42:31.977019"], ["updated_at", "2016-09-10 15:42:31.977019"]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."provider" = $1 AND "users"."email" IS NULL[0m  [["provider", "email"]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."provider" = $1 AND "users"."email" IS NULL  [["provider", "email"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "tours" ("title", "description", "price", "is_trans_included", "estimated_time", "city_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "Test Tour"], ["description", "This is test tour"], ["price", 10.0], ["is_trans_included", "t"], ["estimated_time", "10 Hours"], ["city_id", 1], ["created_at", "2016-09-10 15:42:32.027447"], ["updated_at", "2016-09-10 15:42:32.027447"]]
  [1m[35m (1.4ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "attractions" ("title", "description", "address", "trans_info", "tour_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["title", "Test Attraction"], ["description", "So cool att"], ["address", "Genslerstraße 55, 13055 Berlin"], ["trans_info", "Take M13 for 10 stops"], ["tour_id", 1], ["created_at", "2016-09-10 15:42:32.055809"], ["updated_at", "2016-09-10 15:42:32.055809"]]
  [1m[36m (1.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "attraction_details" ("title", "description", "attraction_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Test AD"], ["description", "Nice detail"], ["attraction_id", 1], ["created_at", "2016-09-10 15:42:32.070344"], ["updated_at", "2016-09-10 15:42:32.070344"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["attachment_type_id", 1], ["attraction_id", 1], ["url", "Image Url1 for att"], ["created_at", "2016-09-10 15:42:32.081733"], ["updated_at", "2016-09-10 15:42:32.081733"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attachment_type_id", 1], ["attraction_id", 1], ["url", "Image Url2 for att"], ["created_at", "2016-09-10 15:42:32.085938"], ["updated_at", "2016-09-10 15:42:32.085938"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["attachment_type_id", 2], ["attraction_id", 1], ["url", "Audio Url1 for att"], ["created_at", "2016-09-10 15:42:32.089046"], ["updated_at", "2016-09-10 15:42:32.089046"]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "attachments" ("attachment_type_id", "attraction_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attachment_type_id", 2], ["attraction_id", 1], ["url", "Audio Url2 for att"], ["created_at", "2016-09-10 15:42:32.091811"], ["updated_at", "2016-09-10 15:42:32.091811"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "attachments" ("attachment_type_id", "attraction_detail_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["attachment_type_id", 1], ["attraction_detail_id", 1], ["url", "Image Url1 for attd"], ["created_at", "2016-09-10 15:42:32.095575"], ["updated_at", "2016-09-10 15:42:32.095575"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "attachments" ("attachment_type_id", "attraction_detail_id", "url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attachment_type_id", 2], ["attraction_detail_id", 1], ["url", "Audio Url2 for attd"], ["created_at", "2016-09-10 15:42:32.098747"], ["updated_at", "2016-09-10 15:42:32.098747"]]
  [1m[35m (1.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."provider" = $1 AND "users"."email" IS NULL  [["provider", "email"]]
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "reviews" ("title", "content", "score", "tour_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Nice job"], ["content", "good"], ["score", 10.0], ["tour_id", 1], ["created_at", "2016-09-10 15:42:32.111350"], ["updated_at", "2016-09-10 15:42:32.111350"]]
  [1m[35m (1.2ms)[0m  COMMIT


Started GET "/tours/1/attractions" for ::1 at 2016-09-10 17:42:44 +0200
  [1m[36mActiveRecord::SchemaMigration Load (2.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ToursController#attractions as */*
  Parameters: {"id"=>"1"}
  [1m[35mTour Load (6.8ms)[0m  SELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered tours/attractions.json.jbuilder (2.3ms)
Completed 200 OK in 77ms (Views: 18.5ms | ActiveRecord: 11.6ms)
  [1m[36mTour Load (4.3ms)[0m  [1mSELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTour Load (0.5ms)[0m  SELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mAttraction Load (1.6ms)[0m  [1mSELECT "attractions".* FROM "attractions" WHERE "attractions"."tour_id" = $1[0m  [["tour_id", 1]]


Started GET "/tours/1/attractions" for ::1 at 2016-09-10 17:44:02 +0200
Processing by ToursController#attractions as */*
  Parameters: {"id"=>"1"}
  [1m[36mTour Load (0.3ms)[0m  [1mSELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mAttraction Load (5.5ms)[0m  SELECT "attractions".* FROM "attractions" WHERE "attractions"."tour_id" = $1  [["tour_id", 1]]
  [1m[36mAttachment Load (3.0ms)[0m  [1mSELECT "attachments".* FROM "attachments" WHERE "attachments"."attraction_id" = $1 AND "attachments"."attachment_type_id" = 1[0m  [["attraction_id", 1]]
  [1m[35mAttachment Load (0.2ms)[0m  SELECT "attachments".* FROM "attachments" WHERE "attachments"."attraction_id" = $1 AND "attachments"."attachment_type_id" = 2  [["attraction_id", 1]]
  Rendered attractions/_attraction.json.jbuilder (16.1ms)
  Rendered tours/attractions.json.jbuilder (42.6ms)
Completed 200 OK in 57ms (Views: 44.2ms | ActiveRecord: 11.1ms)


Started GET "/attractions" for ::1 at 2016-09-10 17:44:17 +0200
Processing by AttractionsController#index as */*
  [1m[36mAttraction Load (0.4ms)[0m  [1mSELECT "attractions".* FROM "attractions"[0m
  [1m[35mAttachment Load (0.3ms)[0m  SELECT "attachments".* FROM "attachments" WHERE "attachments"."attraction_id" = $1 AND "attachments"."attachment_type_id" = 1  [["attraction_id", 1]]
  [1m[36mAttachment Load (0.2ms)[0m  [1mSELECT "attachments".* FROM "attachments" WHERE "attachments"."attraction_id" = $1 AND "attachments"."attachment_type_id" = 2[0m  [["attraction_id", 1]]
  Rendered attractions/_attraction.json.jbuilder (2.7ms)
  Rendered attractions/index.json.jbuilder (5.2ms)
Completed 200 OK in 24ms (Views: 21.8ms | ActiveRecord: 0.9ms)


Started GET "/attractions/1/details" for ::1 at 2016-09-10 17:44:27 +0200

AbstractController::ActionNotFound (The action 'details' could not be found for AttractionsController):
  actionpack (4.2.6) lib/abstract_controller/base.rb:132:in `process'
  actionview (4.2.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.6) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.6) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.6) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.6) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:817:in `call'
  warden (1.2.6) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.6) lib/warden/manager.rb:34:in `catch'
  warden (1.2.6) lib/warden/manager.rb:34:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.6) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.6) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.6) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/unknown_action.html.erb within rescues/layout (1.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (49.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (90.9ms)


Started GET "/attractions/1/details" for ::1 at 2016-09-10 17:46:09 +0200
Processing by AttractionsController#details as */*
  Parameters: {"id"=>"1"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `details' for nil:NilClass):
  app/controllers/attractions_controller.rb:57:in `details'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.0ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (45.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (34.7ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (78.4ms)
  [1m[35mTour Load (0.5ms)[0m  SELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mAttraction Load (0.2ms)[0m  [1mSELECT  "attractions".* FROM "attractions" WHERE "attractions"."tour_id" = $1  ORDER BY "attractions"."id" ASC LIMIT 1[0m  [["tour_id", 1]]
  [1m[35mAttractionDetail Load (1.6ms)[0m  SELECT "attraction_details".* FROM "attraction_details" WHERE "attraction_details"."attraction_id" = $1  [["attraction_id", 1]]


Started GET "/attractions/1/details" for ::1 at 2016-09-10 17:47:25 +0200
Processing by AttractionsController#details as */*
  Parameters: {"id"=>"1"}
  [1m[35mAttraction Load (2.0ms)[0m  SELECT  "attractions".* FROM "attractions" WHERE "attractions"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mAttractionDetail Load (4.3ms)[0m  [1mSELECT "attraction_details".* FROM "attraction_details" WHERE "attraction_details"."attraction_id" = $1[0m  [["attraction_id", 1]]
  [1m[35mAttachment Load (5.7ms)[0m  SELECT "attachments".* FROM "attachments" WHERE "attachments"."attraction_detail_id" = $1 AND "attachments"."attachment_type_id" = 1  [["attraction_detail_id", 1]]
  [1m[36mAttachment Load (0.3ms)[0m  [1mSELECT "attachments".* FROM "attachments" WHERE "attachments"."attraction_detail_id" = $1 AND "attachments"."attachment_type_id" = 2[0m  [["attraction_detail_id", 1]]
  Rendered attraction_details/_attraction_detail.json.jbuilder (18.6ms)
  Rendered attractions/details.json.jbuilder (31.6ms)
Completed 200 OK in 62ms (Views: 27.9ms | ActiveRecord: 18.9ms)


Started GET "/reviews" for ::1 at 2016-09-10 17:47:43 +0200
Processing by ReviewsController#index as */*
  Rendered reviews/index.html.erb within layouts/application (9.9ms)
Completed 500 Internal Server Error in 24ms (ActiveRecord: 0.0ms)

ActionView::Template::Error (undefined method `each' for nil:NilClass):
    10:   </thead>
    11: 
    12:   <tbody>
    13:     <% @reviews.each do |review| %>
    14:       <tr>
    15:         <td><%= link_to 'Show', review %></td>
    16:         <td><%= link_to 'Edit', edit_review_path(review) %></td>
  app/views/reviews/index.html.erb:13:in `_app_views_reviews_index_html_erb__699078205043807775_70093215327960'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (43.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (32.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (71.4ms)


Started GET "/reviews/1" for ::1 at 2016-09-10 17:47:45 +0200
Processing by ReviewsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35mReview Load (10.3ms)[0m  SELECT  "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered reviews/_review.json.jbuilder (0.6ms)
  Rendered reviews/show.json.jbuilder (3.0ms)
Completed 200 OK in 36ms (Views: 13.1ms | ActiveRecord: 11.9ms)


Started GET "/reviews/1" for ::1 at 2016-09-10 17:50:00 +0200
Processing by ReviewsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mReview Load (0.3ms)[0m  [1mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered reviews/_review.json.jbuilder (0.2ms)
  Rendered reviews/show.json.jbuilder (1.1ms)
Completed 200 OK in 18ms (Views: 10.6ms | ActiveRecord: 0.3ms)


Started GET "/tours/1/reviews" for ::1 at 2016-09-10 17:50:10 +0200
Processing by ToursController#reviews as */*
  Parameters: {"id"=>"1"}
  [1m[35mTour Load (0.3ms)[0m  SELECT  "tours".* FROM "tours" WHERE "tours"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mReview Load (3.0ms)[0m  [1mSELECT "reviews".* FROM "reviews" WHERE "reviews"."tour_id" = $1[0m  [["tour_id", 1]]
Completed 200 OK in 35ms (Views: 3.3ms | ActiveRecord: 7.3ms)
  [1m[36mTour Load (19.2ms)[0m  [1mSELECT  "tours".* FROM "tours"  ORDER BY "tours"."id" ASC LIMIT 1[0m


Started GET "/tours/" for ::1 at 2016-09-11 14:38:38 +0200
  [1m[36mActiveRecord::SchemaMigration Load (7.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ToursController#index as */*
  [1m[35mTour Load (0.6ms)[0m  SELECT "tours".* FROM "tours"
  [1m[36mCity Load (11.8ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCountry Load (7.6ms)[0m  SELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered tours/_tour.json.jbuilder (80.6ms)
  Rendered tours/index.json.jbuilder (115.8ms)
Completed 200 OK in 161ms (Views: 119.0ms | ActiveRecord: 26.8ms)


Started GET "/tours?price=10" for ::1 at 2016-09-11 14:38:49 +0200
Processing by ToursController#index as */*
  Parameters: {"price"=>"10"}
  [1m[36mTour Load (0.3ms)[0m  [1mSELECT "tours".* FROM "tours" WHERE "tours"."price" = $1[0m  [["price", 10.0]]
  [1m[35mCity Load (0.2ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCountry Load (0.4ms)[0m  [1mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered tours/_tour.json.jbuilder (2.7ms)
  Rendered tours/index.json.jbuilder (35.7ms)
Completed 200 OK in 64ms (Views: 45.9ms | ActiveRecord: 0.8ms)


Started GET "/tours?price=1" for ::1 at 2016-09-11 14:38:51 +0200
Processing by ToursController#index as */*
  Parameters: {"price"=>"1"}
  [1m[35mTour Load (0.7ms)[0m  SELECT "tours".* FROM "tours" WHERE "tours"."price" = $1  [["price", 1.0]]
  Rendered tours/index.json.jbuilder (2.5ms)
Completed 200 OK in 15ms (Views: 13.6ms | ActiveRecord: 0.7ms)


Started GET "/tours?price=10" for ::1 at 2016-09-11 14:38:54 +0200
Processing by ToursController#index as */*
  Parameters: {"price"=>"10"}
  [1m[36mTour Load (0.3ms)[0m  [1mSELECT "tours".* FROM "tours" WHERE "tours"."price" = $1[0m  [["price", 10.0]]
  [1m[35mCity Load (0.3ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCountry Load (0.2ms)[0m  [1mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered tours/_tour.json.jbuilder (2.4ms)
  Rendered tours/index.json.jbuilder (4.2ms)
Completed 200 OK in 17ms (Views: 13.6ms | ActiveRecord: 0.8ms)


Started GET "/tours?price=10&city=1" for ::1 at 2016-09-11 14:39:14 +0200
Processing by ToursController#index as */*
  Parameters: {"price"=>"10", "city"=>"1"}
  [1m[35mTour Load (0.6ms)[0m  SELECT "tours".* FROM "tours" WHERE "tours"."price" = $1 AND "tours"."city_id" = 1  [["price", 10.0]]
  [1m[36mCity Load (0.2ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCountry Load (0.2ms)[0m  SELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered tours/_tour.json.jbuilder (2.1ms)
  Rendered tours/index.json.jbuilder (6.4ms)
Completed 200 OK in 20ms (Views: 18.1ms | ActiveRecord: 1.1ms)


Started GET "/tours?price=10&city=2" for ::1 at 2016-09-11 14:39:16 +0200
Processing by ToursController#index as */*
  Parameters: {"price"=>"10", "city"=>"2"}
  [1m[36mTour Load (0.3ms)[0m  [1mSELECT "tours".* FROM "tours" WHERE "tours"."price" = $1 AND "tours"."city_id" = 2[0m  [["price", 10.0]]
  Rendered tours/index.json.jbuilder (1.5ms)
Completed 200 OK in 13ms (Views: 10.6ms | ActiveRecord: 0.3ms)


Started GET "/tours?price=10&city=1" for ::1 at 2016-09-11 14:39:18 +0200
Processing by ToursController#index as */*
  Parameters: {"price"=>"10", "city"=>"1"}
  [1m[35mTour Load (0.5ms)[0m  SELECT "tours".* FROM "tours" WHERE "tours"."price" = $1 AND "tours"."city_id" = 1  [["price", 10.0]]
  [1m[36mCity Load (0.3ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCountry Load (0.2ms)[0m  SELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered tours/_tour.json.jbuilder (2.5ms)
  Rendered tours/index.json.jbuilder (5.8ms)
Completed 200 OK in 20ms (Views: 18.0ms | ActiveRecord: 1.0ms)


Started GET "/tours?price=10&city=1&country=1" for ::1 at 2016-09-11 14:39:25 +0200
Processing by ToursController#index as */*
  Parameters: {"price"=>"10", "city"=>"1", "country"=>"1"}
  Rendered tours/index.json.jbuilder (26.7ms)
Completed 500 Internal Server Error in 40ms (ActiveRecord: 0.0ms)

ActionView::Template::Error (Association named 'country' was not found on Tour; perhaps you misspelled it?):
    1: json.array! @tours, partial: 'tours/tour', as: :tour
  app/views/tours/index.json.jbuilder:1:in `_app_views_tours_index_json_jbuilder___3086468394041459370_70123021673980'
  app/controllers/tours_controller.rb:11:in `index'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (65.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (132.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (191.7ms)


Started GET "/tours?price=10&city=1&country=2" for ::1 at 2016-09-11 14:39:30 +0200
Processing by ToursController#index as */*
  Parameters: {"price"=>"10", "city"=>"1", "country"=>"2"}
  Rendered tours/index.json.jbuilder (4.7ms)
Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.0ms)

ActionView::Template::Error (Association named 'country' was not found on Tour; perhaps you misspelled it?):
    1: json.array! @tours, partial: 'tours/tour', as: :tour
  app/views/tours/index.json.jbuilder:1:in `_app_views_tours_index_json_jbuilder___3086468394041459370_70123021673980'
  app/controllers/tours_controller.rb:11:in `index'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (8.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.7ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (46.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (35.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (77.1ms)


Started GET "/tours?price=10&city=1&country=1" for ::1 at 2016-09-11 14:39:31 +0200
Processing by ToursController#index as */*
  Parameters: {"price"=>"10", "city"=>"1", "country"=>"1"}
  Rendered tours/index.json.jbuilder (3.1ms)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.0ms)

ActionView::Template::Error (Association named 'country' was not found on Tour; perhaps you misspelled it?):
    1: json.array! @tours, partial: 'tours/tour', as: :tour
  app/views/tours/index.json.jbuilder:1:in `_app_views_tours_index_json_jbuilder___3086468394041459370_70123021673980'
  app/controllers/tours_controller.rb:11:in `index'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (41.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (32.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (74.3ms)


Started GET "/tours?price=10&city=1&country=1" for ::1 at 2016-09-11 14:39:59 +0200
Processing by ToursController#index as */*
  Parameters: {"price"=>"10", "city"=>"1", "country"=>"1"}
  Rendered tours/index.json.jbuilder (22.6ms)
Completed 500 Internal Server Error in 36ms (ActiveRecord: 4.0ms)

ActionView::Template::Error (PG::UndefinedColumn: ERROR:  column tours.country does not exist
LINE 1: ...tours"."price" = $1 AND "tours"."city_id" = 1 AND "tours"."c...
                                                             ^
: SELECT "tours".* FROM "tours" INNER JOIN "cities" ON "cities"."id" = "tours"."city_id" WHERE "tours"."price" = $1 AND "tours"."city_id" = 1 AND "tours"."country" = '1'):
    1: json.array! @tours, partial: 'tours/tour', as: :tour
  app/views/tours/index.json.jbuilder:1:in `_app_views_tours_index_json_jbuilder___3086468394041459370_70123021673980'
  app/controllers/tours_controller.rb:11:in `index'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.7ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (45.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (32.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (73.2ms)


Started GET "/tours?price=10&city=1&country=1" for ::1 at 2016-09-11 14:41:23 +0200
Processing by ToursController#index as */*
  Parameters: {"price"=>"10", "city"=>"1", "country"=>"1"}
  Rendered tours/index.json.jbuilder (4.6ms)
Completed 500 Internal Server Error in 20ms (ActiveRecord: 1.0ms)

ActionView::Template::Error (PG::UndefinedTable: ERROR:  missing FROM-clause entry for table "city"
LINE 1: ...tours"."price" = $1 AND "tours"."city_id" = 1 AND "city"."co...
                                                             ^
: SELECT "tours".* FROM "tours" INNER JOIN "cities" ON "cities"."id" = "tours"."city_id" WHERE "tours"."price" = $1 AND "tours"."city_id" = 1 AND "city"."country_id" = '1'):
    1: json.array! @tours, partial: 'tours/tour', as: :tour
  app/views/tours/index.json.jbuilder:1:in `_app_views_tours_index_json_jbuilder___3086468394041459370_70123021673980'
  app/controllers/tours_controller.rb:11:in `index'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (44.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (38.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (78.2ms)


Started GET "/tours?price=10&city=1&country=1" for ::1 at 2016-09-11 14:43:04 +0200
Processing by ToursController#index as */*
  Parameters: {"price"=>"10", "city"=>"1", "country"=>"1"}
  Rendered tours/index.json.jbuilder (3.2ms)
Completed 500 Internal Server Error in 20ms (ActiveRecord: 0.0ms)

ActionView::Template::Error (PG::UndefinedColumn: ERROR:  column cities.country does not exist
LINE 1: ...tours"."price" = $1 AND "tours"."city_id" = 1 AND "cities"."...
                                                             ^
: SELECT "tours".* FROM "tours" INNER JOIN "cities" ON "cities"."id" = "tours"."city_id" WHERE "tours"."price" = $1 AND "tours"."city_id" = 1 AND "cities"."country" = '1'):
    1: json.array! @tours, partial: 'tours/tour', as: :tour
  app/views/tours/index.json.jbuilder:1:in `_app_views_tours_index_json_jbuilder___3086468394041459370_70123021673980'
  app/controllers/tours_controller.rb:11:in `index'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (7.5ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (50.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (33.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (78.3ms)


Started GET "/tours?price=10&city=1&country=1" for ::1 at 2016-09-11 14:43:26 +0200
Processing by ToursController#index as */*
  Parameters: {"price"=>"10", "city"=>"1", "country"=>"1"}
  [1m[36mTour Load (4.3ms)[0m  [1mSELECT "tours".* FROM "tours" INNER JOIN "cities" ON "cities"."id" = "tours"."city_id" WHERE "tours"."price" = $1 AND "tours"."city_id" = 1 AND "cities"."country_id" = $2[0m  [["price", 10.0], ["country_id", 1]]
  [1m[35mCity Load (0.2ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCountry Load (1.8ms)[0m  [1mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered tours/_tour.json.jbuilder (19.8ms)
  Rendered tours/index.json.jbuilder (30.4ms)
Completed 200 OK in 47ms (Views: 32.5ms | ActiveRecord: 7.5ms)


Started GET "/tours?price=10&city=1&country=2" for ::1 at 2016-09-11 14:43:30 +0200
Processing by ToursController#index as */*
  Parameters: {"price"=>"10", "city"=>"1", "country"=>"2"}
  [1m[35mTour Load (0.3ms)[0m  SELECT "tours".* FROM "tours" INNER JOIN "cities" ON "cities"."id" = "tours"."city_id" WHERE "tours"."price" = $1 AND "tours"."city_id" = 1 AND "cities"."country_id" = $2  [["price", 10.0], ["country_id", 2]]
  Rendered tours/index.json.jbuilder (3.7ms)
Completed 200 OK in 19ms (Views: 15.5ms | ActiveRecord: 1.7ms)


Started GET "/tours?country=2" for ::1 at 2016-09-11 14:43:35 +0200
Processing by ToursController#index as */*
  Parameters: {"country"=>"2"}
  [1m[36mTour Load (12.4ms)[0m  [1mSELECT "tours".* FROM "tours" INNER JOIN "cities" ON "cities"."id" = "tours"."city_id" WHERE "cities"."country_id" = $1[0m  [["country_id", 2]]
  Rendered tours/index.json.jbuilder (14.7ms)
Completed 200 OK in 28ms (Views: 14.9ms | ActiveRecord: 12.4ms)


Started GET "/tours?country=1" for ::1 at 2016-09-11 14:43:36 +0200
Processing by ToursController#index as */*
  Parameters: {"country"=>"1"}
  [1m[35mTour Load (0.6ms)[0m  SELECT "tours".* FROM "tours" INNER JOIN "cities" ON "cities"."id" = "tours"."city_id" WHERE "cities"."country_id" = $1  [["country_id", 1]]
  [1m[36mCity Load (0.6ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCountry Load (0.3ms)[0m  SELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered tours/_tour.json.jbuilder (7.0ms)
  Rendered tours/index.json.jbuilder (10.9ms)
Completed 200 OK in 23ms (Views: 18.0ms | ActiveRecord: 3.7ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateLibraries (20160911124627)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateLibraries (20160911124757)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (45.4ms)[0m  [1mCREATE TABLE "libraries" ("id" serial primary key, "tour_id" integer, "user_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (2.0ms)[0m  CREATE  INDEX  "index_libraries_on_tour_id" ON "libraries"  ("tour_id")
  [1m[36m (2.0ms)[0m  [1mCREATE  INDEX  "index_libraries_on_user_id" ON "libraries"  ("user_id")[0m
  [1m[35m (9.6ms)[0m  ALTER TABLE "libraries" ADD CONSTRAINT "fk_rails_40579d8e9c"
FOREIGN KEY ("tour_id")
  REFERENCES "tours" ("id")

  [1m[36m (18.1ms)[0m  [1mALTER TABLE "libraries" ADD CONSTRAINT "fk_rails_bc06af755e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20160911124757"]]
  [1m[36m (5.0ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (1.9ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attachment_types'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (5.9ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attachments'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attraction_details'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'attractions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'cities'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'countries'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'libraries'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'reviews'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.9ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'tours'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (2.0ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname



Started GET "/users" for ::1 at 2016-09-11 15:00:26 +0200
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by UsersController#index as */*
  Rendered users/index.html.erb within layouts/application (9.4ms)
Completed 500 Internal Server Error in 34ms (ActiveRecord: 0.0ms)

ActionView::Template::Error (undefined method `each' for nil:NilClass):
    10:   </thead>
    11: 
    12:   <tbody>
    13:     <% @users.each do |user| %>
    14:       <tr>
    15:         <td><%= link_to 'Show', user %></td>
    16:         <td><%= link_to 'Edit', edit_user_path(user) %></td>
  app/views/users/index.html.erb:13:in `_app_views_users_index_html_erb___691052683421572687_70225696219160'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.7ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (49.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (53.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (101.9ms)


Started GET "/users/1/tours" for ::1 at 2016-09-11 15:00:30 +0200
Processing by UsersController#tours as */*
  Parameters: {"id"=>"1"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `tours' for nil:NilClass):
  app/controllers/users_controller.rb:8:in `tours'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (40.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (36.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (79.1ms)


Started GET "/users/1/reviews" for ::1 at 2016-09-11 15:01:10 +0200

ActionController::RoutingError (No route matches [GET] "/users/1/reviews"):
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_table.html.erb (29.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (114.0ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (32.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (72.9ms)


Started GET "/users/1/review" for ::1 at 2016-09-11 15:04:10 +0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActionController::RoutingError (No route matches [GET] "/users/1/review"):
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_table.html.erb (5.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (11.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (93.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (50.6ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (94.9ms)


Started GET "/users/1/tours" for ::1 at 2016-09-11 15:04:24 +0200
Processing by UsersController#tours as */*
  Parameters: {"id"=>"1"}
Completed 500 Internal Server Error in 11927ms (ActiveRecord: 0.0ms)

NoMethodError - undefined method `tours' for nil:NilClass:
  app/controllers/users_controller.rb:9:in `tours'
  actionpack (4.2.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.6) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.6) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.6) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.6) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.6) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.6) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.6) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.6) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.6) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.6) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.6) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.6) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.6) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:817:in `call'
  warden (1.2.6) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.6) lib/warden/manager.rb:34:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.6) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.6) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.6) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'



Started GET "/users/1/tours" for ::1 at 2016-09-11 15:05:01 +0200
Processing by UsersController#tours as */*
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
Completed 404 Not Found in 13ms (Views: 0.2ms | ActiveRecord: 4.6ms)
  [1m[36mUser Load (3.7ms)[0m  [1mSELECT  "users".* FROM "users"  ORDER BY "users"."id" ASC LIMIT 1[0m


Started POST "/auth" for ::1 at 2016-09-11 15:05:53 +0200
Processing by DeviseTokenAuth::RegistrationsController#create as JSON
  Parameters: {"email"=>"yamen@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "registration"=>{"email"=>"yamen@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
Can't verify CSRF token authenticity
Unpermitted parameter: registration
Unpermitted parameter: registration
Unpermitted parameter: registration
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (2.8ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."provider" = $1 AND "users"."email" = $2  [["provider", "email"], ["email", "yamen@gmail.com"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "tokens", "uid", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "yamen@gmail.com"], ["encrypted_password", "$2a$10$X1xowyQ7j6c9wM/ndJSEwuENnXWX52pkOjU1GNxKP1yR67EXiboYS"], ["tokens", "{}"], ["uid", "yamen@gmail.com"], ["created_at", "2016-09-11 13:05:53.700888"], ["updated_at", "2016-09-11 13:05:53.700888"]]
  [1m[35m (1.9ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3  [["tokens", "{\"EQnQawdu3uUERWRAmv5ZTQ\":{\"token\":\"$2a$10$/bpwBhnaOukwV/7onExMn.xhfFE31g/AUoSe74GhYqb.d4HfTrLK2\",\"expiry\":1474808753}}"], ["updated_at", "2016-09-11 13:05:53.778663"], ["id", 1]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1 FOR UPDATE[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3  [["tokens", "{\"EQnQawdu3uUERWRAmv5ZTQ\":{\"token\":\"$2a$10$1EqyOcXgONt0HdEEpT9epuuznpvntmFJfzQ0HV7.0qqgnVnEtANL2\",\"expiry\":1474808753,\"last_token\":\"$2a$10$/bpwBhnaOukwV/7onExMn.xhfFE31g/AUoSe74GhYqb.d4HfTrLK2\",\"updated_at\":\"2016-09-11T15:05:53.859+02:00\"}}"], ["updated_at", "2016-09-11 13:05:53.860751"], ["id", 1]]
  [1m[36m (1.3ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 261ms (Views: 0.4ms | ActiveRecord: 17.5ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users"  ORDER BY "users"."id" ASC LIMIT 1


Started POST "/user/1/tours" for ::1 at 2016-09-11 15:06:16 +0200

ActionController::RoutingError (No route matches [POST] "/user/1/tours"):
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (72.7ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (32.0ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (72.5ms)


Started GET "/user/1/tours" for ::1 at 2016-09-11 15:06:29 +0200

ActionController::RoutingError (No route matches [GET] "/user/1/tours"):
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_route.html.erb (2.8ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (74.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (37.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (78.4ms)


Started GET "/users/1/tours" for ::1 at 2016-09-11 15:06:45 +0200
Processing by UsersController#tours as JSON
  Parameters: {"id"=>"1", "user"=>{}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
Completed 500 Internal Server Error in 101515ms (ActiveRecord: 0.5ms)

ActiveRecord::HasManyThroughAssociationNotFoundError - Could not find the association :library in model User:
  activerecord (4.2.6) lib/active_record/reflection.rb:838:in `check_validity!'
  activerecord (4.2.6) lib/active_record/associations/association.rb:25:in `initialize'
  activerecord (4.2.6) lib/active_record/associations/has_many_through_association.rb:10:in `initialize'
  activerecord (4.2.6) lib/active_record/associations.rb:162:in `association'
  activerecord (4.2.6) lib/active_record/associations/builder/association.rb:115:in `tours'
  app/controllers/users_controller.rb:9:in `tours'
  actionpack (4.2.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.6) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.6) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.6) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.6) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.6) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.6) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.6) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.6) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.6) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.6) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.6) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.6) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.6) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:817:in `call'
  warden (1.2.6) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.6) lib/warden/manager.rb:34:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.6) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.6) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.6) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'



Started GET "/users/1/tours" for ::1 at 2016-09-11 15:08:30 +0200
Processing by UsersController#tours as JSON
  Parameters: {"id"=>"1", "user"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 47379ms (ActiveRecord: 0.3ms)

ActiveRecord::HasManyThroughAssociationNotFoundError - Could not find the association :library in model User:
  activerecord (4.2.6) lib/active_record/reflection.rb:838:in `check_validity!'
  activerecord (4.2.6) lib/active_record/associations/association.rb:25:in `initialize'
  activerecord (4.2.6) lib/active_record/associations/has_many_through_association.rb:10:in `initialize'
  activerecord (4.2.6) lib/active_record/associations.rb:162:in `association'
  activerecord (4.2.6) lib/active_record/associations/builder/association.rb:115:in `tours'
  app/controllers/users_controller.rb:9:in `tours'
  actionpack (4.2.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.6) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.6) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.6) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.6) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.6) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.6) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.6) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.6) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.6) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.6) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.6) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.6) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.6) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:817:in `call'
  warden (1.2.6) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.6) lib/warden/manager.rb:34:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.6) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.6) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.6) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'



Started GET "/users/1/tours" for ::1 at 2016-09-11 15:09:20 +0200
Processing by UsersController#tours as JSON
  Parameters: {"id"=>"1", "user"=>{}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
Completed 500 Internal Server Error in 11860ms (ActiveRecord: 0.3ms)

ActiveRecord::HasManyThroughAssociationNotFoundError - Could not find the association :libraries in model User:
  activerecord (4.2.6) lib/active_record/reflection.rb:838:in `check_validity!'
  activerecord (4.2.6) lib/active_record/associations/association.rb:25:in `initialize'
  activerecord (4.2.6) lib/active_record/associations/has_many_through_association.rb:10:in `initialize'
  activerecord (4.2.6) lib/active_record/associations.rb:162:in `association'
  activerecord (4.2.6) lib/active_record/associations/builder/association.rb:115:in `tours'
  app/controllers/users_controller.rb:9:in `tours'
  actionpack (4.2.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.6) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.6) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.6) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.6) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.6) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.6) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.6) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.6) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.6) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.6) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.6) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.6) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.6) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.6) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.6) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.6) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.6) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:817:in `call'
  warden (1.2.6) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.6) lib/warden/manager.rb:34:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.6) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.6) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.6) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.6) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'



Started GET "/users/1/tours" for ::1 at 2016-09-11 15:09:41 +0200
Processing by UsersController#tours as JSON
  Parameters: {"id"=>"1", "user"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTour Load (2.2ms)[0m  SELECT "tours".* FROM "tours" INNER JOIN "libraries" ON "tours"."id" = "libraries"."tour_id" WHERE "libraries"."user_id" = $1  [["user_id", 1]]
  Rendered users/tours.json.jbuilder (1.6ms)
Completed 200 OK in 18238ms (Views: 11.3ms | ActiveRecord: 4.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mTour Load (3.2ms)[0m  SELECT  "tours".* FROM "tours"  ORDER BY "tours"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "libraries" ("user_id", "tour_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 1], ["tour_id", 1], ["created_at", "2016-09-11 13:11:01.698339"], ["updated_at", "2016-09-11 13:11:01.698339"]]
  [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mTour Load (0.3ms)[0m  [1mSELECT "tours".* FROM "tours" INNER JOIN "libraries" ON "tours"."id" = "libraries"."tour_id" WHERE "libraries"."user_id" = $1[0m  [["user_id", 1]]


Started GET "/users/1/tours" for ::1 at 2016-09-11 15:11:30 +0200
Processing by UsersController#tours as JSON
  Parameters: {"id"=>"1", "user"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTour Load (0.4ms)[0m  SELECT "tours".* FROM "tours" INNER JOIN "libraries" ON "tours"."id" = "libraries"."tour_id" WHERE "libraries"."user_id" = $1  [["user_id", 1]]
  [1m[36mCity Load (2.6ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCountry Load (2.2ms)[0m  SELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered tours/_tour.json.jbuilder (21.9ms)
  Rendered users/tours.json.jbuilder (23.1ms)
Completed 200 OK in 7119ms (Views: 27.8ms | ActiveRecord: 7.1ms)


Started GET "/users/1/tours" for ::1 at 2016-09-11 15:22:07 +0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by UsersController#tours as JSON
  Parameters: {"id"=>"1", "user"=>{}}
  [1m[35mUser Load (3.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTour Load (4.6ms)[0m  [1mSELECT "tours".* FROM "tours" INNER JOIN "libraries" ON "tours"."id" = "libraries"."tour_id" WHERE "libraries"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35mCity Load (0.3ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCountry Load (0.2ms)[0m  [1mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered tours/_tour.json.jbuilder (25.7ms)
  Rendered users/tours.json.jbuilder (63.7ms)
Completed 200 OK in 638738ms (Views: 74.2ms | ActiveRecord: 21.7ms)


Started GET "/cities" for ::1 at 2016-09-11 15:41:04 +0200
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by CitiesController#index as JSON
  Parameters: {"city"=>{}}
  Rendered cities/index.json.jbuilder (1.6ms)
Completed 200 OK in 22ms (Views: 14.5ms | ActiveRecord: 3.1ms)


Started GET "/cities/1" for ::1 at 2016-09-11 15:41:06 +0200
Processing by CitiesController#show as JSON
  Parameters: {"id"=>"1", "city"=>{}}
  [1m[35mCity Load (0.5ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered cities/_city.json.jbuilder (0.3ms)
  Rendered cities/show.json.jbuilder (3.3ms)
Completed 200 OK in 30ms (Views: 11.2ms | ActiveRecord: 5.0ms)


Started GET "/cities/2" for ::1 at 2016-09-11 15:41:08 +0200
Processing by CitiesController#show as JSON
  Parameters: {"id"=>"2", "city"=>{}}
  [1m[36mCity Load (0.5ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered cities/_city.json.jbuilder (0.1ms)
  Rendered cities/show.json.jbuilder (0.8ms)
Completed 200 OK in 16ms (Views: 14.2ms | ActiveRecord: 0.5ms)


Started GET "/cities/3" for ::1 at 2016-09-11 15:41:10 +0200
Processing by CitiesController#show as JSON
  Parameters: {"id"=>"3", "city"=>{}}
  [1m[35mCity Load (0.4ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 3]]
  Rendered cities/_city.json.jbuilder (0.1ms)
  Rendered cities/show.json.jbuilder (1.3ms)
Completed 200 OK in 15ms (Views: 13.5ms | ActiveRecord: 0.4ms)


Started GET "/countries" for ::1 at 2016-09-11 15:41:25 +0200
Processing by CountriesController#index as JSON
  Parameters: {"country"=>{}}
  [1m[36mCountry Load (0.9ms)[0m  [1mSELECT "countries".* FROM "countries"[0m
  Rendered countries/_country.json.jbuilder (11.1ms)
  Rendered countries/_country.json.jbuilder (0.4ms)
  Rendered countries/_country.json.jbuilder (0.3ms)
  [1m[35mCity Load (0.2ms)[0m  SELECT "cities".* FROM "cities" WHERE "cities"."country_id" = $1  [["country_id", 1]]
  [1m[36mCity Load (0.3ms)[0m  [1mSELECT "cities".* FROM "cities" WHERE "cities"."country_id" = $1[0m  [["country_id", 2]]
  [1m[35mCity Load (0.2ms)[0m  SELECT "cities".* FROM "cities" WHERE "cities"."country_id" = $1  [["country_id", 3]]
  Rendered countries/index.json.jbuilder (28.9ms)
Completed 200 OK in 41ms (Views: 37.9ms | ActiveRecord: 4.0ms)


Started GET "/countries" for ::1 at 2016-09-11 15:47:50 +0200
Processing by CountriesController#index as JSON
  Parameters: {"country"=>{}}
  [1m[36mCountry Load (0.3ms)[0m  [1mSELECT "countries".* FROM "countries"[0m
  [1m[35mCity Load (0.3ms)[0m  SELECT "cities".* FROM "cities" WHERE "cities"."country_id" = $1  [["country_id", 1]]
  Rendered countries/_country.json.jbuilder (1.7ms)
  [1m[36mCity Load (0.2ms)[0m  [1mSELECT "cities".* FROM "cities" WHERE "cities"."country_id" = $1[0m  [["country_id", 2]]
  Rendered countries/_country.json.jbuilder (1.4ms)
  [1m[35mCity Load (0.3ms)[0m  SELECT "cities".* FROM "cities" WHERE "cities"."country_id" = $1  [["country_id", 3]]
  Rendered countries/_country.json.jbuilder (1.6ms)
  Rendered countries/index.json.jbuilder (8.5ms)
Completed 200 OK in 23ms (Views: 20.8ms | ActiveRecord: 1.1ms)


Started GET "/attachments/1" for ::1 at 2016-09-11 16:06:24 +0200

NameError - undefined local variable or method `apipie' for #<ActionDispatch::Routing::Mapper:0x007f8758386378>:
  config/routes.rb:3:in `block in <top (required)>'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:432:in `eval_block'
  actionpack (4.2.6) lib/action_dispatch/routing/route_set.rb:410:in `draw'
  config/routes.rb:1:in `<top (required)>'
  activesupport (4.2.6) lib/active_support/dependencies.rb:268:in `block in load'
  activesupport (4.2.6) lib/active_support/dependencies.rb:240:in `load_dependency'
  activesupport (4.2.6) lib/active_support/dependencies.rb:268:in `load'
  railties (4.2.6) lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
  railties (4.2.6) lib/rails/application/routes_reloader.rb:40:in `load_paths'
  railties (4.2.6) lib/rails/application/routes_reloader.rb:16:in `reload!'
  railties (4.2.6) lib/rails/application/routes_reloader.rb:26:in `block in updater'
  activesupport (4.2.6) lib/active_support/file_update_checker.rb:75:in `execute'
  railties (4.2.6) lib/rails/application/routes_reloader.rb:7:in `execute'
  railties (4.2.6) lib/rails/application/finisher.rb:81:in `block (2 levels) in <module:Finisher>'
  activesupport (4.2.6) lib/active_support/callbacks.rb:446:in `block in make_lambda'
  activesupport (4.2.6) lib/active_support/callbacks.rb:192:in `block in simple'
  activesupport (4.2.6) lib/active_support/callbacks.rb:504:in `block in call'
  activesupport (4.2.6) lib/active_support/callbacks.rb:504:in `call'
  activesupport (4.2.6) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.6) lib/active_support/callbacks.rb:778:in `_run_prepare_callbacks'
  activesupport (4.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.6) lib/action_dispatch/middleware/reloader.rb:83:in `prepare!'
  actionpack (4.2.6) lib/action_dispatch/middleware/reloader.rb:71:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.6) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.6) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.6) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.6) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.6) lib/rails/engine.rb:518:in `call'
  railties (4.2.6) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/yali/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'



Started GET "/attachments/1" for ::1 at 2016-09-11 16:12:42 +0200
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by AttachmentsController#show as JSON
  Parameters: {"id"=>"1", "attachment"=>{}}
  [1m[35mAttachment Load (20.9ms)[0m  SELECT  "attachments".* FROM "attachments" WHERE "attachments"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered attachments/_attachment.json.jbuilder (0.6ms)
  Rendered attachments/show.json.jbuilder (13.8ms)
Completed 200 OK in 93ms (Views: 39.9ms | ActiveRecord: 25.5ms)


Started GET "/attachments/1" for ::1 at 2016-09-11 16:13:33 +0200
Processing by AttachmentsController#show as JSON
  Parameters: {"id"=>"1", "attachment"=>{}}
  [1m[36mAttachment Load (4.2ms)[0m  [1mSELECT  "attachments".* FROM "attachments" WHERE "attachments"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mAttachmentType Load (8.1ms)[0m  SELECT  "attachment_types".* FROM "attachment_types" WHERE "attachment_types"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered attachments/_attachment.json.jbuilder (54.0ms)
  Rendered attachments/show.json.jbuilder (55.4ms)
Completed 200 OK in 80ms (Views: 49.7ms | ActiveRecord: 27.7ms)


Started GET "/attractions/1/details" for ::1 at 2016-09-11 16:13:52 +0200
Processing by AttractionsController#details as JSON
  Parameters: {"id"=>"1", "attraction"=>{}}
  [1m[36mAttraction Load (12.2ms)[0m  [1mSELECT  "attractions".* FROM "attractions" WHERE "attractions"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mAttractionDetail Load (11.5ms)[0m  SELECT "attraction_details".* FROM "attraction_details" WHERE "attraction_details"."attraction_id" = $1  [["attraction_id", 1]]
  [1m[36mAttachment Load (0.2ms)[0m  [1mSELECT "attachments".* FROM "attachments" WHERE "attachments"."attraction_detail_id" = $1 AND "attachments"."attachment_type_id" = 1[0m  [["attraction_detail_id", 1]]
  [1m[35mAttachment Load (0.2ms)[0m  SELECT "attachments".* FROM "attachments" WHERE "attachments"."attraction_detail_id" = $1 AND "attachments"."attachment_type_id" = 2  [["attraction_detail_id", 1]]
  Rendered attraction_details/_attraction_detail.json.jbuilder (7.2ms)
  Rendered attractions/details.json.jbuilder (25.3ms)
Completed 200 OK in 69ms (Views: 24.1ms | ActiveRecord: 26.2ms)


Started GET "/apipie" for ::1 at 2016-09-11 16:14:11 +0200
Processing by Apipie::ApipiesController#index as HTML
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/apipie-rails-0.3.6/app/views/apipie/apipies/_languages.erb (0.9ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/apipie-rails-0.3.6/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (97.4ms)
Completed 200 OK in 261ms (Views: 118.0ms | ActiveRecord: 0.0ms)


Started GET "/apipie/stylesheets/bundled/prettify.css" for ::1 at 2016-09-11 16:14:11 +0200


Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for ::1 at 2016-09-11 16:14:11 +0200


Started GET "/apipie/stylesheets/application.css" for ::1 at 2016-09-11 16:14:11 +0200


Started GET "/apipie/javascripts/bundled/jquery.js" for ::1 at 2016-09-11 16:14:11 +0200


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for ::1 at 2016-09-11 16:14:11 +0200


Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for ::1 at 2016-09-11 16:14:11 +0200


Started GET "/apipie/javascripts/bundled/prettify.js" for ::1 at 2016-09-11 16:14:11 +0200


Started GET "/apipie/javascripts/apipie.js" for ::1 at 2016-09-11 16:14:11 +0200


Started GET "/apipie/1.0/users/tours.html" for ::1 at 2016-09-11 16:14:31 +0200
Processing by Apipie::ApipiesController#index as HTML
  Parameters: {"version"=>"1.0", "resource"=>"users", "method"=>"tours.html"}
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/apipie-rails-0.3.6/app/views/apipie/apipies/_languages.erb (0.0ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/apipie-rails-0.3.6/app/views/apipie/apipies/_headers.html.erb (0.7ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/apipie-rails-0.3.6/app/views/apipie/apipies/_method_detail.erb (7.7ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/apipie-rails-0.3.6/app/views/apipie/apipies/method.html.erb within layouts/apipie/apipie (17.8ms)
Completed 200 OK in 136ms (Views: 30.5ms | ActiveRecord: 0.0ms)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for ::1 at 2016-09-11 16:14:31 +0200


Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for ::1 at 2016-09-11 16:14:31 +0200


Started GET "/apipie/stylesheets/bundled/prettify.css" for ::1 at 2016-09-11 16:14:31 +0200


Started GET "/apipie/stylesheets/application.css" for ::1 at 2016-09-11 16:14:31 +0200


Started GET "/apipie/javascripts/bundled/jquery.js" for ::1 at 2016-09-11 16:14:31 +0200


Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for ::1 at 2016-09-11 16:14:31 +0200


Started GET "/apipie/javascripts/bundled/prettify.js" for ::1 at 2016-09-11 16:14:31 +0200


Started GET "/apipie/javascripts/apipie.js" for ::1 at 2016-09-11 16:14:31 +0200


Started GET "/apipie/" for ::1 at 2016-09-11 16:16:01 +0200
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Apipie::ApipiesController#index as HTML
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/apipie-rails-0.3.6/app/views/apipie/apipies/_languages.erb (0.4ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/apipie-rails-0.3.6/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (83.7ms)
Completed 200 OK in 270ms (Views: 107.1ms | ActiveRecord: 0.0ms)


Started GET "/apipie/stylesheets/bundled/prettify.css" for ::1 at 2016-09-11 16:16:02 +0200


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for ::1 at 2016-09-11 16:16:02 +0200


Started GET "/apipie/stylesheets/application.css" for ::1 at 2016-09-11 16:16:02 +0200


Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for ::1 at 2016-09-11 16:16:02 +0200


Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for ::1 at 2016-09-11 16:16:02 +0200


Started GET "/apipie/javascripts/bundled/jquery.js" for ::1 at 2016-09-11 16:16:02 +0200


Started GET "/apipie/javascripts/bundled/prettify.js" for ::1 at 2016-09-11 16:16:02 +0200


Started GET "/apipie/javascripts/apipie.js" for ::1 at 2016-09-11 16:16:02 +0200


Started GET "/apipie/" for ::1 at 2016-09-11 16:16:24 +0200
Processing by Apipie::ApipiesController#index as HTML
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/apipie-rails-0.3.6/app/views/apipie/apipies/_languages.erb (0.1ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/apipie-rails-0.3.6/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (6.1ms)
Completed 200 OK in 125ms (Views: 15.4ms | ActiveRecord: 0.0ms)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for ::1 at 2016-09-11 16:16:25 +0200


Started GET "/apipie/stylesheets/bundled/prettify.css" for ::1 at 2016-09-11 16:16:25 +0200


Started GET "/apipie/stylesheets/application.css" for ::1 at 2016-09-11 16:16:25 +0200


Started GET "/apipie/javascripts/bundled/jquery.js" for ::1 at 2016-09-11 16:16:25 +0200


Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for ::1 at 2016-09-11 16:16:25 +0200


Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for ::1 at 2016-09-11 16:16:25 +0200


Started GET "/apipie/javascripts/bundled/prettify.js" for ::1 at 2016-09-11 16:16:25 +0200


Started GET "/apipie/javascripts/apipie.js" for ::1 at 2016-09-11 16:16:25 +0200


Started GET "/apipie/" for ::1 at 2016-09-11 16:16:35 +0200
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Apipie::ApipiesController#index as HTML
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/apipie-rails-0.3.6/app/views/apipie/apipies/_languages.erb (0.7ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/apipie-rails-0.3.6/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (32.7ms)
Completed 200 OK in 174ms (Views: 46.8ms | ActiveRecord: 0.0ms)


Started GET "/apipie/javascripts/bundled/jquery.js" for ::1 at 2016-09-11 16:16:35 +0200


Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for ::1 at 2016-09-11 16:16:35 +0200


Started GET "/apipie/stylesheets/bundled/prettify.css" for ::1 at 2016-09-11 16:16:35 +0200


Started GET "/apipie/stylesheets/application.css" for ::1 at 2016-09-11 16:16:35 +0200


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for ::1 at 2016-09-11 16:16:35 +0200


Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for ::1 at 2016-09-11 16:16:35 +0200


Started GET "/apipie/javascripts/bundled/prettify.js" for ::1 at 2016-09-11 16:16:35 +0200


Started GET "/apipie/javascripts/apipie.js" for ::1 at 2016-09-11 16:16:35 +0200


Started GET "/apipie/" for ::1 at 2016-09-11 16:17:05 +0200
Processing by Apipie::ApipiesController#index as HTML
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/apipie-rails-0.3.6/app/views/apipie/apipies/_languages.erb (0.0ms)
  Rendered /Users/yali/.rvm/gems/ruby-2.2.1/gems/apipie-rails-0.3.6/app/views/apipie/apipies/index.html.erb within layouts/apipie/apipie (4.2ms)
Completed 200 OK in 159ms (Views: 13.0ms | ActiveRecord: 1.0ms)


Started GET "/apipie/stylesheets/bundled/bootstrap.min.css" for ::1 at 2016-09-11 16:17:06 +0200


Started GET "/apipie/javascripts/bundled/jquery.js" for ::1 at 2016-09-11 16:17:06 +0200


Started GET "/apipie/stylesheets/bundled/prettify.css" for ::1 at 2016-09-11 16:17:06 +0200


Started GET "/apipie/stylesheets/application.css" for ::1 at 2016-09-11 16:17:06 +0200


Started GET "/apipie/stylesheets/bundled/bootstrap-responsive.min.css" for ::1 at 2016-09-11 16:17:06 +0200


Started GET "/apipie/javascripts/bundled/bootstrap-collapse.js" for ::1 at 2016-09-11 16:17:06 +0200


Started GET "/apipie/javascripts/bundled/prettify.js" for ::1 at 2016-09-11 16:17:06 +0200


Started GET "/apipie/javascripts/apipie.js" for ::1 at 2016-09-11 16:17:06 +0200
  [1m[36mAttraction Load (8.2ms)[0m  [1mSELECT  "attractions".* FROM "attractions"  ORDER BY "attractions"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "attractions" ("title", "description", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Test Geo"], ["description", "Test2"], ["address", "Genslerstraße 55, 13055 Berlin"], ["created_at", "2016-09-11 14:20:32.161807"], ["updated_at", "2016-09-11 14:20:32.161807"]]
  [1m[35m (2.2ms)[0m  COMMIT
  [1m[36mAttraction Load (0.5ms)[0m  [1mSELECT "attractions".* FROM "attractions"[0m
  [1m[35mAttraction Load (0.2ms)[0m  SELECT  "attractions".* FROM "attractions"  ORDER BY "attractions"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "attractions" SET "title" = $1, "latitude" = $2, "longitude" = $3, "updated_at" = $4 WHERE "attractions"."id" = $5  [["title", "What ?"], ["latitude", 52.53921], ["longitude", 13.49934], ["updated_at", "2016-09-11 14:23:10.021326"], ["id", 1]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
